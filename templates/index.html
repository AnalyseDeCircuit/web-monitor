<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#121212">
    <meta name="description" content="Advanced System Monitor - Real-time CPU, Memory, GPU, Network, Docker, and SSH monitoring">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="System Monitor">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'><rect fill='%23121212' width='192' height='192'/><text x='50%' y='50%' font-size='100' font-weight='bold' fill='%23ff4757' text-anchor='middle' dominant-baseline='central'>M</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'><rect fill='%23121212' width='192' height='192'/><text x='50%' y='50%' font-size='100' font-weight='bold' fill='%23ff4757' text-anchor='middle' dominant-baseline='central'>M</text></svg>">
    <title>System Monitor</title>
    <link rel="stylesheet" href="{{ asset "/static/vendor/jetbrains-mono/css/jetbrains-mono.css" }}">
    <link rel="stylesheet" href="{{ asset "/static/vendor/intel-one-mono/css/intel-one-mono.css" }}">
    <link rel="stylesheet" href="{{ asset "/static/vendor/font-awesome/css/all.min.css" }}">
    <link rel="stylesheet" href="{{ asset "/static/css/style.css" }}">
    <script src="{{ asset "/static/vendor/chartjs/chart.min.js" }}"></script>
</head>
<body>
    <!-- App Dialog (confirm/alert replacement) -->
    <div id="app-dialog-overlay">
        <div id="app-dialog">
            <div id="app-dialog-header">
                <i id="app-dialog-icon" class="fas fa-question-circle"></i>
                <span id="app-dialog-title">Confirm</span>
            </div>
            <div id="app-dialog-body">Are you sure?</div>
            <div id="app-dialog-footer">
                <button id="app-dialog-cancel" class="btn btn-secondary">Cancel</button>
                <button id="app-dialog-ok" class="btn btn-primary">OK</button>
            </div>
        </div>
    </div>

    <!-- Mobile Menu Button -->
    <button class="mobile-menu-btn" id="mobile-menu-btn" onclick="toggleMobileMenu()" title="Toggle Menu">
        <i class="fas fa-bars"></i>
    </button>
    
    <!-- Mobile Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebar-overlay" onclick="closeMobileMenu()"></div>
    
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div style="display: flex; align-items: center; margin-bottom: 30px;">
                <div class="sidebar-title">
                    <i class="fas fa-gauge-high" style="color: var(--accent-cpu);"></i>
                    <span>OpsKernel</span>
                </div>
                <button class="sidebar-toggle" id="sidebar-toggle" onclick="toggleSidebar()" title="Toggle Sidebar">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>
            <div class="nav-item active" onclick="switchPage('general')">
                <i class="fas fa-home" title="General Dashboard"></i>
                <span>General</span>
            </div>
            <div class="nav-item" onclick="switchPage('cpu')">
                <i class="fas fa-microchip" title="CPU Details"></i>
                <span>CPU</span>
            </div>
            <div class="nav-item" onclick="switchPage('gpu')">
                <i class="fas fa-tv" title="GPU Monitor"></i>
                <span>GPU</span>
            </div>
            <div class="nav-item" onclick="switchPage('memory')">
                <i class="fas fa-memory" title="Memory"></i>
                <span>Memory</span>
            </div>
            <div class="nav-item" onclick="switchPage('processes')">
                <i class="fas fa-list" title="Processes"></i>
                <span>Processes</span>
            </div>
            <div class="nav-item" onclick="switchPage('storage')">
                <i class="fas fa-hdd" title="Storage"></i>
                <span>Storage</span>
            </div>
            
            <!-- Network Group -->
            <div class="nav-item" onclick="toggleNetworkSubmenu()">
                <i class="fas fa-network-wired" title="Network"></i>
                <span>Network</span>
                <i class="fas fa-chevron-down" style="margin-left: auto; font-size: 0.8rem;" id="net-submenu-icon"></i>
            </div>
            <div id="network-submenu" style="display: none; flex-direction: column; padding-left: 20px; background: rgba(0,0,0,0.2);">
                <div class="nav-item" onclick="switchPage('net-traffic')" style="font-size: 0.9rem;">
                    <i class="fas fa-chart-line"></i>
                    <span>Traffic</span>
                </div>
                <div class="nav-item" onclick="switchPage('ssh')" style="font-size: 0.9rem;">
                    <i class="fas fa-lock"></i>
                    <span>SSH</span>
                </div>
            </div>

            <div class="nav-item" onclick="switchPage('docker')">
                <i class="fab fa-docker" title="Docker Management"></i>
                <span>Docker</span>
            </div>
            <div class="nav-item" onclick="switchPage('services')">
                <i class="fas fa-cogs" title="System Services"></i>
                <span>Services</span>
            </div>
            <div class="nav-item" onclick="switchPage('cron')">
                <i class="fas fa-clock" title="Cron Jobs"></i>
                <span>Cron</span>
            </div>
            
            <div class="nav-item" onclick="switchPage('alerts')">
                <i class="fas fa-bell" title="Alerts"></i>
                <span>Alerts</span>
            </div>

            <!-- Plugins Group -->
            <div class="nav-item" onclick="togglePluginsSubmenu()" id="nav-plugins-group" style="display: none;">
                <i class="fas fa-plug" title="Plugins"></i>
                <span>Plugins</span>
                <i class="fas fa-chevron-down" style="margin-left: auto; font-size: 0.8rem;" id="plugins-submenu-icon"></i>
            </div>
            <div id="plugins-submenu" style="display: none; flex-direction: column; padding-left: 20px; background: rgba(0,0,0,0.2);">
                <div class="nav-item" onclick="switchPage('plugins')" style="font-size: 0.9rem;">
                    <i class="fas fa-list"></i>
                    <span>Plugins</span>
                </div>
            </div>

            <div style="margin-top: auto;"></div>

            <!-- Admin Only -->
            <div class="nav-item" id="nav-users" onclick="switchPage('users')" style="display: none;">
                <i class="fas fa-users" title="User Management"></i>
                <span>Users</span>
            </div>
            <div class="nav-item" id="nav-logs" onclick="switchPage('logs')" style="display: none;">
                <i class="fas fa-history" title="Operation Logs"></i>
                <span>Logs</span>
            </div>
            
            <!-- All Users -->
            <div class="nav-item" onclick="switchPage('profile')">
                <i class="fas fa-user-cog" title="Profile"></i>
                <span>Profile</span>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <div style="display: flex; align-items: center; gap: 15px;">
                    <h1 id="page-title">General Dashboard</h1>
                    <div id="status-dot" class="status-dot" title="Connection Status"></div>
                    <select id="interval-select" onchange="changeInterval()" style="background: rgba(255,255,255,0.1); color: var(--text-main); border: none; padding: 5px; border-radius: 4px; font-family: inherit; font-size: 0.8rem; cursor: pointer;">
                        <option value="2">2s</option>
                        <option value="5" selected>5s</option>
                        <option value="10">10s</option>
                        <option value="20">20s</option>
                        <option value="30">30s</option>
                        <option value="60">60s</option>
                    </select>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <button class="theme-toggle" id="theme-toggle" onclick="toggleTheme()" title="切换主题">
                        <i class="fas fa-moon" id="theme-icon"></i>
                    </button>
                    <div id="boot-time" class="boot-time">Booting...</div>
                </div>
            </div>

            <!-- Page: General -->
            <div id="page-general" class="page active">
                <div class="grid-container">
        <!-- System Info (Fastfetch) -->
        <div class="card" style="grid-column: 1 / -1;">
            <div class="card-title">System Information</div>
            <div class="fastfetch-container">
                <div class="ascii-logo" id="ascii-logo">
                    <!-- ASCII logo will be injected here -->
                </div>
                <div class="sys-info-list" id="sys-info-list">
                    <div>Loading system info...</div>
                </div>
            </div>
        </div>

        <!-- Power Profile Card -->
        <div class="card" id="power-profile-card" style="display: none; grid-column: 1 / -1;">
            <div class="card-title" style="display: flex; align-items: center; gap: 10px;">
                <span><i class="fas fa-bolt" style="margin-right: 8px; color: var(--accent-disk);"></i>Power & GUI</span>
                <button id="power-profile-refresh" onclick="loadPowerProfile(); loadGuiStatus();" title="刷新状态" class="btn btn-ghost" style="margin-left: auto;">
                    <i class="fas fa-sync-alt"></i>
                </button>
            </div>
            <!-- Power Profile Section -->
            <div style="margin-bottom: 12px;">
                <div class="power-section-label"><i class="fas fa-tachometer-alt" style="margin-right: 6px;"></i>Power Mode</div>
                <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap; margin-top: 8px;" id="power-profile-controls">
                    <!-- Buttons will be injected here -->
                </div>
                <div id="power-profile-hint" class="power-hint" style="display: none;"></div>
            </div>
            <!-- GUI Session Section -->
            <div id="gui-controls" style="margin-top: 15px; padding-top: 12px;">
                <div class="power-section-label"><i class="fas fa-desktop" style="margin-right: 6px;"></i>GUI Session</div>
                <div style="display: flex; align-items: center; gap: 12px; flex-wrap: wrap; margin-top: 8px;">
                    <span id="gui-status-text" class="gui-status-badge">Detecting...</span>
                    <span id="gui-default-target" class="gui-target-badge" style="display: none;"></span>
                    <button id="gui-toggle-btn" class="gui-toggle-btn" onclick="toggleGuiSession()" style="display: none;">
                        Toggle
                    </button>
                    <span id="gui-admin-hint" style="font-size: 0.8rem; color: var(--text-dim); display: none;">(Admin only)</span>
                </div>
            </div>
        </div>

        <!-- CPU Card -->
        <div class="card">
            <div class="card-title">
                <span>CPU</span>
                <span id="cpu-freq" class="freq-badge">0 MHz</span>
            </div>
            <div class="stat-group">
                <div class="stat-label">
                    <span>Total Load</span>
                    <span id="cpu-total-text">0%</span>
                </div>
                <div class="progress-bg">
                    <div id="cpu-total-bar" class="progress-fill cpu-fill" style="width: 0%"></div>
                </div>
            </div>
            <div id="cpu-cores" class="cpu-grid">
                <!-- Cores injected here -->
            </div>
        </div>

        <!-- Memory Card -->
        <div class="card">
            <div class="card-title">Memory</div>
            <div class="stat-group">
                <div class="stat-label">
                    <span>RAM Usage</span>
                    <span id="mem-text">0 / 0</span>
                </div>
                <div class="progress-bg">
                    <div id="mem-bar" class="progress-fill mem-fill" style="width: 0%"></div>
                </div>
                <div style="text-align: right; font-size: 0.8rem; color: var(--text-dim); margin-top: 5px;">
                    <span id="mem-percent">0%</span>
                </div>
            </div>
            <div id="mem-details" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.85rem; margin-top: 15px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 10px;">
                <!-- Details injected here -->
            </div>
            
            <div style="margin-top: 15px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 10px;">
                <div style="font-size: 0.9rem; margin-bottom: 10px; color: var(--text-dim);">Top Processes</div>
                <div id="processes-container" style="font-size: 0.85rem; display: flex; flex-direction: column; gap: 5px; max-height: 200px; overflow-y: auto; padding-right: 5px;">
                    <!-- Processes injected here -->
                </div>
            </div>
        </div>

        <!-- Sensors Card -->
        <div class="card">
            <div class="card-title">Sensors & Power</div>
            <div id="sensors-container"></div>
            <div id="power-container" style="margin-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 10px;"></div>
        </div>

        <!-- Network Card -->
        <div class="card">
            <div class="card-title" style="display: flex; align-items: center; gap: 10px;">
                <span>Network</span>
                <div style="margin-left: auto; display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-dim);">
                    <span style="font-size: 0.8rem;">Interface</span>
                    <select id="net-interface-select" onchange="onNetworkInterfaceChange()" style="background: rgba(255,255,255,0.08); color: var(--text-main); border: 1px solid rgba(255,255,255,0.12); border-radius: 4px; padding: 4px 8px; font-size: 0.85rem;">
                        <option value="__all__">All interfaces</option>
                    </select>
                </div>
            </div>
            <div id="net-interface-meta" style="font-size: 0.85rem; color: var(--text-dim); margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">
                <span id="net-interface-ip">-</span>
                <span id="net-interface-status" style="font-size: 0.8rem; padding: 2px 6px; border-radius: 4px; background: rgba(255,255,255,0.06); color: var(--text-dim);">-</span>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div class="net-box net-stat-block">
                    <div style="font-size: 0.8rem; color: var(--text-dim);">UPLOAD SPEED</div>
                    <div id="net-speed-sent" class="net-value" style="color: var(--accent-cpu)">0 B/s</div>
                </div>
                 <div class="net-box net-stat-block">
                    <div style="font-size: 0.8rem; color: var(--text-dim);">DOWNLOAD SPEED</div>
                    <div id="net-speed-recv" class="net-value" style="color: var(--accent-mem)">0 B/s</div>
                </div>
            </div>
        </div>

        <!-- SSH Card -->
        <div class="card">
            <div class="card-title">SSH Status</div>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <div>
                    <span style="color: var(--text-dim);">Service:</span>
                    <span id="general-ssh-status" style="font-weight: bold; margin-left: 5px;">-</span>
                </div>
                <div>
                    <span style="color: var(--text-dim);">Connections:</span>
                    <span id="general-ssh-connections" style="font-weight: bold; margin-left: 5px; color: var(--accent-net);">0</span>
                </div>
            </div>
            <div style="font-size: 0.9rem; color: var(--text-dim); margin-bottom: 5px;">Active Sessions</div>
            <div id="general-ssh-sessions" style="font-size: 0.85rem; display: flex; flex-direction: column; gap: 5px; height: 150px; overflow-y: auto; background: rgba(0,0,0,0.2); border-radius: 4px; padding: 5px;">
                <!-- Sessions injected here -->
            </div>
        </div>

        <!-- GPU Summary Card (General Page) -->
        <div class="card">
            <div class="card-title">GPU Summary</div>
            <div id="general-gpu-container" style="max-height: 200px; overflow-y: auto;">
                <div id="general-gpu-list" style="display: flex; flex-direction: column; gap: 12px;">
                    <!-- GPU items injected here -->
                </div>
            </div>
        </div>

        <!-- Disk Card -->
        <div class="card" style="grid-column: 1 / -1;">
            <div class="card-title">Storage</div>
            <div id="disk-container" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <!-- Disks injected here -->
            </div>
        </div>
    </div> <!-- End grid-container -->
    </div> <!-- End page-general -->

        <!-- Page: Alerts -->
        <div id="page-alerts" class="page">
            <!-- Alerts Summary Header -->
            <div class="alerts-header">
                <div class="alerts-summary">
                    <div class="summary-item">
                        <span class="summary-value" id="alerts-total-rules">0</span>
                        <span class="summary-label">Total Rules</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-value" id="alerts-enabled-rules">0</span>
                        <span class="summary-label">Enabled</span>
                    </div>
                    <div class="summary-item firing">
                        <span class="summary-value" id="alerts-firing-count">0</span>
                        <span class="summary-label">Firing</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-value" id="alerts-today-events">0</span>
                        <span class="summary-label">Today</span>
                    </div>
                </div>
                <div class="alerts-actions">
                    <button onclick="testAlertNotification()" class="btn btn-secondary" title="Send test notification">
                        <i class="fa-solid fa-paper-plane"></i> Test
                    </button>
                    <button onclick="saveAlertConfig()" class="btn btn-primary">
                        <i class="fa-solid fa-save"></i> Save Config
                    </button>
                </div>
            </div>

            <div class="alerts-grid">
                <!-- Active Alerts -->
                <div class="card alerts-active-card">
                    <div class="card-title">
                        <i class="fa-solid fa-bell"></i> Active Alerts
                        <span class="badge badge-danger" id="active-alerts-badge" style="display: none;">0</span>
                    </div>
                    <div id="active-alerts-list" class="alerts-list">
                        <div class="empty-state">
                            <i class="fa-solid fa-check-circle"></i>
                            <span>No active alerts</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Presets -->
                <div class="card">
                    <div class="card-title">
                        <i class="fa-solid fa-wand-magic-sparkles"></i> Quick Presets
                    </div>
                    <div class="presets-container">
                        <div class="preset-item" onclick="enablePreset('essential')">
                            <div class="preset-icon"><i class="fa-solid fa-shield"></i></div>
                            <div class="preset-info">
                                <div class="preset-name">Essential</div>
                                <div class="preset-desc">CPU, Memory, Disk critical alerts</div>
                            </div>
                            <button class="btn btn-sm btn-primary">Enable</button>
                        </div>
                        <div class="preset-item" onclick="enablePreset('standard')">
                            <div class="preset-icon"><i class="fa-solid fa-shield-halved"></i></div>
                            <div class="preset-info">
                                <div class="preset-name">Standard</div>
                                <div class="preset-desc">Warning + Critical levels</div>
                            </div>
                            <button class="btn btn-sm btn-primary">Enable</button>
                        </div>
                        <div class="preset-item" onclick="enablePreset('comprehensive')">
                            <div class="preset-icon"><i class="fa-solid fa-shield-virus"></i></div>
                            <div class="preset-info">
                                <div class="preset-name">Comprehensive</div>
                                <div class="preset-desc">All builtin rules</div>
                            </div>
                            <button class="btn btn-sm btn-primary">Enable</button>
                        </div>
                        <div class="preset-item danger" onclick="disableAllAlertRules()">
                            <div class="preset-icon"><i class="fa-solid fa-power-off"></i></div>
                            <div class="preset-info">
                                <div class="preset-name">Disable All</div>
                                <div class="preset-desc">Turn off all alert rules</div>
                            </div>
                            <button class="btn btn-sm btn-danger">Disable</button>
                        </div>
                    </div>
                </div>

                <!-- Alert Rules -->
                <div class="card" style="grid-column: span 2;">
                    <div class="card-title">
                        <i class="fa-solid fa-list-check"></i> Alert Rules
                    </div>
                    <div id="alert-rules-list" class="rules-table-container">
                        <table class="rules-table">
                            <thead>
                                <tr>
                                    <th style="width: 50px;">On</th>
                                    <th>Rule Name</th>
                                    <th style="width: 100px;">Metric</th>
                                    <th style="width: 120px;">Condition</th>
                                    <th style="width: 80px;">Duration</th>
                                    <th style="width: 80px;">Severity</th>
                                    <th style="width: 100px;">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="rules-tbody">
                                <!-- Rules injected by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Notification Channels -->
                <div class="card">
                    <div class="card-title">
                        <i class="fa-solid fa-tower-broadcast"></i> Notification Channels
                    </div>
                    <div class="channels-container">
                        <!-- Global Enable -->
                        <div class="channel-item">
                            <div class="channel-header">
                                <label class="switch">
                                    <input type="checkbox" id="alerts-global-enabled">
                                    <span class="slider round"></span>
                                </label>
                                <span class="channel-name">Enable Alerts</span>
                            </div>
                        </div>

                        <!-- Dashboard -->
                        <div class="channel-item">
                            <div class="channel-header">
                                <label class="switch">
                                    <input type="checkbox" id="channel-dashboard">
                                    <span class="slider round"></span>
                                </label>
                                <i class="fa-solid fa-desktop channel-icon"></i>
                                <span class="channel-name">Dashboard</span>
                            </div>
                            <div class="channel-desc">Show alert notifications in dashboard</div>
                        </div>

                        <!-- Webhook -->
                        <div class="channel-item">
                            <div class="channel-header">
                                <label class="switch">
                                    <input type="checkbox" id="channel-webhook">
                                    <span class="slider round"></span>
                                </label>
                                <i class="fa-solid fa-link channel-icon"></i>
                                <span class="channel-name">Webhook</span>
                                <button class="btn btn-xs btn-secondary" onclick="testAlertNotification('webhook')">Test</button>
                            </div>
                            <input type="text" id="webhook-url" class="form-input" placeholder="https://hooks.slack.com/..." style="margin-top: 8px;">
                        </div>

                        <!-- Email (placeholder) -->
                        <div class="channel-item disabled">
                            <div class="channel-header">
                                <label class="switch">
                                    <input type="checkbox" id="channel-email" disabled>
                                    <span class="slider round"></span>
                                </label>
                                <i class="fa-solid fa-envelope channel-icon"></i>
                                <span class="channel-name">Email</span>
                                <span class="badge badge-secondary">Coming Soon</span>
                            </div>
                        </div>

                        <!-- Options -->
                        <div class="channel-item" style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border-color);">
                            <div class="channel-header">
                                <label class="switch">
                                    <input type="checkbox" id="notify-on-resolved" checked>
                                    <span class="slider round"></span>
                                </label>
                                <span class="channel-name">Notify on Resolved</span>
                            </div>
                            <div class="channel-desc">Also send notification when alert resolves</div>
                        </div>
                    </div>
                </div>

                <!-- Alert History -->
                <div class="card">
                    <div class="card-title">
                        <i class="fa-solid fa-clock-rotate-left"></i> Alert History
                        <select id="history-filter" class="form-select-sm" onchange="loadAlertHistory()">
                            <option value="">All</option>
                            <option value="firing">Firing</option>
                            <option value="resolved">Resolved</option>
                        </select>
                    </div>
                    <div id="alert-history-list" class="history-list">
                        <div class="empty-state">
                            <i class="fa-solid fa-inbox"></i>
                            <span>No history records</span>
                        </div>
                    </div>
                    <div class="history-pagination" id="history-pagination" style="display: none;">
                        <button class="btn btn-sm btn-secondary" onclick="loadMoreHistory()">Load More</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page: Plugins Management -->
        <div id="page-plugins" class="page">
            <!-- Content injected by JS -->
        </div>

        <!-- Page: Plugin Container (Iframe) -->
        <div id="page-plugin-container" class="page">
            <div id="plugin-container" style="width: 100%; height: calc(100vh - 120px); border-radius: 8px; overflow: hidden;">
                <!-- Iframe injected by JS -->
            </div>
        </div>

    <!-- Other Pages (Placeholders) -->
    <div id="page-cpu" class="page">
        <div class="grid-container" style="display: flex; flex-direction: column; gap: 15px;">
            <!-- CPU Overview Card -->
            <div class="card">
                <div class="card-title"><i class="fa-solid fa-microchip" style="margin-right: 8px;"></i>CPU Overview</div>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; text-align: center; padding: 10px 0;">
                    <div>
                        <div style="font-size: 0.75rem; color: var(--text-dim); margin-bottom: 6px;">Overall Usage</div>
                        <div id="cpu-overview-percent" style="font-size: 2rem; font-weight: bold; color: var(--accent-cpu);">0%</div>
                    </div>
                    <div>
                        <div style="font-size: 0.75rem; color: var(--text-dim); margin-bottom: 6px;">Frequency</div>
                        <div id="cpu-overview-freq" style="font-size: 2rem; font-weight: bold; color: var(--accent-cpu);">- GHz</div>
                    </div>
                    <div>
                        <div style="font-size: 0.75rem; color: var(--text-dim); margin-bottom: 6px;">Temperature</div>
                        <div id="cpu-overview-temp" style="font-size: 2rem; font-weight: bold; color: #2ed573;">-°C</div>
                    </div>
                </div>
            </div>

            <!-- Load Average -->
            <div class="card">
                <div class="card-title"><i class="fa-solid fa-gauge-high" style="margin-right: 8px;"></i>Load Average</div>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; padding: 10px 0;">
                    <div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 6px;">
                            <span style="font-size: 0.8rem; color: var(--text-dim);">1 min</span>
                            <span id="cpu-load-1" style="font-size: 0.95rem; font-weight: bold; color: var(--accent-cpu);">0.00</span>
                        </div>
                        <div class="progress-bg" style="height: 8px; border-radius: 4px;">
                            <div id="cpu-load-1-bar" class="progress-fill" style="width: 0%; background: var(--accent-cpu); transition: width 0.3s, background 0.3s; border-radius: 4px;"></div>
                        </div>
                    </div>
                    <div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 6px;">
                            <span style="font-size: 0.8rem; color: var(--text-dim);">5 min</span>
                            <span id="cpu-load-5" style="font-size: 0.95rem; font-weight: bold; color: var(--accent-cpu);">0.00</span>
                        </div>
                        <div class="progress-bg" style="height: 8px; border-radius: 4px;">
                            <div id="cpu-load-5-bar" class="progress-fill" style="width: 0%; background: var(--accent-cpu); transition: width 0.3s, background 0.3s; border-radius: 4px;"></div>
                        </div>
                    </div>
                    <div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 6px;">
                            <span style="font-size: 0.8rem; color: var(--text-dim);">15 min</span>
                            <span id="cpu-load-15" style="font-size: 0.95rem; font-weight: bold; color: var(--accent-cpu);">0.00</span>
                        </div>
                        <div class="progress-bg" style="height: 8px; border-radius: 4px;">
                            <div id="cpu-load-15-bar" class="progress-fill" style="width: 0%; background: var(--accent-cpu); transition: width 0.3s, background 0.3s; border-radius: 4px;"></div>
                        </div>
                    </div>
                </div>
                <div style="text-align: center; font-size: 0.75rem; color: var(--text-dim); margin-top: 5px;">
                    <span id="cpu-core-count">0</span> cores · load > cores = <span style="color: #ff4757;">overloaded</span>
                </div>
            </div>

            <!-- Per Core Usage (collapsible) -->
            <div class="card">
                <div class="card-title" style="display: flex; justify-content: space-between; align-items: center; cursor: pointer;" onclick="toggleCpuCores()">
                    <span><i class="fa-solid fa-cubes" style="margin-right: 8px;"></i>Per-Core Usage</span>
                    <span id="cpu-cores-toggle" style="font-size: 0.8rem; color: var(--text-dim);">▼ Expand</span>
                </div>
                <!-- Compact view (always visible) -->
                <div id="cpu-cores-compact" style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px; justify-content: center;">
                    <!-- Small core boxes injected here -->
                </div>
                <!-- Expanded view (hidden by default) -->
                <div id="cpu-detailed-cores" style="display: none; margin-top: 15px;">
                    <!-- Detailed core cards injected here -->
                </div>
            </div>

            <!-- CPU Usage History -->
            <div class="card">
                <div class="card-title"><i class="fa-solid fa-chart-line" style="margin-right: 8px;"></i>CPU Usage History (60s)</div>
                <div id="cpu-usage-trend" style="height: 150px; position: relative; display: flex; align-items: flex-end; gap: 2px; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 6px;">
                    <!-- Bar chart injected here -->
                </div>
            </div>

            <!-- CPU Information (collapsed by default, at bottom) -->
            <details class="card" style="cursor: pointer;">
                <summary class="card-title" style="list-style: none; display: flex; justify-content: space-between; align-items: center;">
                    <span><i class="fa-solid fa-info-circle" style="margin-right: 8px;"></i>CPU Information</span>
                    <i class="fa-solid fa-chevron-down" style="font-size: 0.8rem; color: var(--text-dim);"></i>
                </summary>
                <div id="cpu-info" style="display: flex; flex-direction: column; gap: 10px; font-size: 0.9rem; margin-top: 15px; padding-top: 10px; border-top: 1px solid var(--border-color);">
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: var(--text-dim);">Model:</span>
                        <span id="cpu-model" style="font-weight: 500; text-align: right; max-width: 70%; overflow: hidden; text-overflow: ellipsis;">-</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: var(--text-dim);">Architecture:</span>
                        <span id="cpu-arch" style="font-weight: 500;">-</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: var(--text-dim);">Cores:</span>
                        <span id="cpu-info-cores" style="font-weight: 500;">-</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: var(--text-dim);">Threads:</span>
                        <span id="cpu-threads" style="font-weight: 500;">-</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: var(--text-dim);">Frequency Range:</span>
                        <span id="cpu-freq-range" style="font-weight: 500;">-</span>
                    </div>
                </div>
            </details>
        </div>
    </div>
    <div id="page-memory" class="page">
        <div class="grid-container" style="display: flex; flex-direction: column; gap: 15px;">
            <!-- Memory Overview -->
            <div class="card">
                <div class="card-title"><i class="fa-solid fa-memory" style="margin-right: 8px;"></i>Memory Overview</div>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; padding: 10px 0; text-align: center;">
                    <div>
                        <div style="font-size: 0.75rem; color: var(--text-dim); margin-bottom: 6px;">RAM Usage</div>
                        <div id="mem-overview-used" style="font-size: 1.6rem; font-weight: bold; color: var(--accent-mem);">0 / 0</div>
                        <div id="mem-overview-percent" style="font-size: 0.9rem; color: var(--text-dim);">0%</div>
                    </div>
                    <div>
                        <div style="font-size: 0.75rem; color: var(--text-dim); margin-bottom: 6px;">Swap</div>
                        <div id="swap-overview-used" style="font-size: 1.6rem; font-weight: bold; color: var(--accent-disk);">0 / 0</div>
                        <div id="swap-overview-percent" style="font-size: 0.9rem; color: var(--text-dim);">0%</div>
                    </div>
                    <div>
                        <div style="font-size: 0.75rem; color: var(--text-dim); margin-bottom: 6px;">Available</div>
                        <div id="mem-overview-available" style="font-size: 1.6rem; font-weight: bold; color: #2ed573;">0 GiB</div>
                        <div style="font-size: 0.9rem; color: var(--text-dim);">Free for use</div>
                    </div>
                </div>
            </div>

            <!-- Memory Distribution (Pie) + Memory Trends (Chart) -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <!-- Memory Pie Chart -->
                <div class="card">
                    <div class="card-title"><i class="fa-solid fa-chart-pie" style="margin-right: 8px;"></i>Memory Distribution</div>
                    <div style="display: flex; flex-direction: column; gap: 15px; align-items: center; padding: 10px;">
                        <canvas id="mem-pie-chart" width="160" height="160" style="margin: 0 auto;"></canvas>
                        <div id="mem-pie-legend" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; width: 100%; font-size: 0.8rem;">
                            <!-- Legend injected here -->
                        </div>
                    </div>
                </div>

                <!-- Memory Usage Trends -->
                <div class="card">
                    <div class="card-title"><i class="fa-solid fa-chart-line" style="margin-right: 8px;"></i>Memory Trends (60s)</div>
                    <div id="mem-trend" style="height: 150px; position: relative; display: flex; align-items: flex-end; gap: 2px; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 6px;">
                        <!-- Chart injected here -->
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 0.85rem;">
                        <span style="color: var(--text-dim);">Current:</span>
                        <span id="mem-trend-current" style="font-weight: bold; color: var(--accent-mem);">0%</span>
                    </div>
                </div>
            </div>

            <!-- Memory Details (collapsible) -->
            <details class="card" open>
                <summary class="card-title" style="list-style: none; display: flex; justify-content: space-between; align-items: center; cursor: pointer;">
                    <span><i class="fa-solid fa-list" style="margin-right: 8px;"></i>Memory Details</span>
                    <i class="fa-solid fa-chevron-down" style="font-size: 0.8rem; color: var(--text-dim);"></i>
                </summary>
                <div id="mem-page-details" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; font-size: 0.85rem; margin-top: 15px; padding-top: 10px; border-top: 1px solid var(--border-color);">
                    <!-- Details injected here (Available, Buffers, Cached, Shared, Slab, Active, Inactive) -->
                </div>
            </details>

            <!-- Process Manager -->
            <div class="card">
                <div class="card-title" style="display: flex; justify-content: space-between; align-items: center;">
                    <span><i class="fa-solid fa-microchip" style="margin-right: 8px;"></i>Process Manager</span>
                    <span id="proc-count" style="font-size: 0.8rem; color: var(--text-dim); font-weight: normal;">0 processes</span>
                </div>
                <div style="overflow-x: auto; max-height: 400px; overflow-y: auto;">
                    <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem; table-layout: fixed;">
                        <thead style="position: sticky; top: 0; background: var(--card-bg); z-index: 1;">
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.1); text-align: left;">
                                <th style="padding: 8px; width: 70px; color: var(--text-dim); cursor: pointer;" class="mono-text" onclick="setSort('pid')">PID <i class="fas fa-sort"></i></th>
                                <th style="padding: 8px; color: var(--text-dim); cursor: pointer;" onclick="setSort('name')">Name <i class="fas fa-sort"></i></th>
                                <th style="padding: 8px; width: 90px; color: var(--text-dim);">User</th>
                                <th style="padding: 8px; width: 70px; text-align: right; color: var(--text-dim);" class="mono-text">Threads</th>
                                <th style="padding: 8px; width: 70px; text-align: right; color: var(--text-dim);" class="mono-text">CPU%</th>
                                <th style="padding: 8px; width: 70px; text-align: right; color: var(--text-dim); cursor: pointer;" class="mono-text" onclick="setSort('memory_percent')">Mem% <i class="fas fa-sort"></i></th>
                            </tr>
                        </thead>
                        <tbody id="process-table-body">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div id="page-net-traffic" class="page">
        <div class="grid-container">
            <!-- Global Network Stats -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Global Traffic</div>
                <div class="network-stats">
                    <div class="net-box net-stat-block">
                        <div style="font-size: 0.8rem; color: var(--text-dim);">UPLOAD SPEED</div>
                        <div id="net-page-speed-sent" class="net-value" style="color: var(--accent-cpu)">0 B/s</div>
                    </div>
                    <div class="net-box net-stat-block">
                        <div style="font-size: 0.8rem; color: var(--text-dim);">DOWNLOAD SPEED</div>
                        <div id="net-page-speed-recv" class="net-value" style="color: var(--accent-mem)">0 B/s</div>
                    </div>
                    <div class="net-box net-stat-block">
                        <div style="font-size: 0.8rem; color: var(--text-dim);">TOTAL SENT</div>
                        <div id="net-page-sent" class="net-value">0 B</div>
                    </div>
                    <div class="net-box net-stat-block">
                        <div style="font-size: 0.8rem; color: var(--text-dim);">TOTAL RECV</div>
                        <div id="net-page-recv" class="net-value">0 B</div>
                    </div>
                </div>
            </div>

            <!-- Connection State Details -->
            <div class="card">
                <div class="card-title">TCP Connection States</div>
                <div class="net-state-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; font-size: 0.85rem;">
                    <div style="display: flex; justify-content: space-between; padding: 5px; background: var(--card-bg); border-radius: 4px;">
                        <span style="color: var(--text-dim);">ESTABLISHED</span>
                        <span id="tcp-established" style="font-weight: bold; color: var(--accent-cpu);">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 5px; background: var(--card-bg); border-radius: 4px;">
                        <span style="color: var(--text-dim);">TIME_WAIT</span>
                        <span id="tcp-time-wait" style="font-weight: bold; color: var(--text-dim);">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 5px; background: var(--card-bg); border-radius: 4px;">
                        <span style="color: var(--text-dim);">CLOSE_WAIT</span>
                        <span id="tcp-close-wait" style="font-weight: bold;">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 5px; background: var(--card-bg); border-radius: 4px;">
                        <span style="color: var(--text-dim);">LISTEN</span>
                        <span id="tcp-listen" style="font-weight: bold; color: var(--accent-mem);">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 5px; background: var(--card-bg); border-radius: 4px;">
                        <span style="color: var(--text-dim);">SYN_SENT</span>
                        <span id="tcp-syn-sent" style="font-weight: bold;">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 5px; background: var(--card-bg); border-radius: 4px;">
                        <span style="color: var(--text-dim);">SYN_RECV</span>
                        <span id="tcp-syn-recv" style="font-weight: bold;">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 5px; background: var(--card-bg); border-radius: 4px;">
                        <span style="color: var(--text-dim);">FIN_WAIT1</span>
                        <span id="tcp-fin-wait1" style="font-weight: bold;">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 5px; background: var(--card-bg); border-radius: 4px;">
                        <span style="color: var(--text-dim);">FIN_WAIT2</span>
                        <span id="tcp-fin-wait2" style="font-weight: bold;">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 5px; background: var(--card-bg); border-radius: 4px;">
                        <span style="color: var(--text-dim);">LAST_ACK</span>
                        <span id="tcp-last-ack" style="font-weight: bold;">0</span>
                    </div>
                </div>
            </div>

            <!-- Protocol Stats -->
            <div class="card">
                <div class="card-title">Active Connections</div>
                <div class="net-active-grid" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; text-align: center;">
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">TCP</div>
                        <div id="net-tcp-count" style="font-size: 1.5rem; font-weight: bold; color: var(--accent-cpu);">0</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">UDP</div>
                        <div id="net-udp-count" style="font-size: 1.5rem; font-weight: bold; color: var(--accent-mem);">0</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">TCP TimeWait</div>
                        <div id="net-tcp-tw" style="font-size: 1.5rem; font-weight: bold; color: var(--text-dim);">0</div>
                    </div>
                </div>
            </div>

            <!-- Listening Ports -->
            <div class="card">
                <div class="card-title">Listening Ports</div>
                <div id="listening-ports" style="font-size: 0.85rem; display: flex; flex-direction: column; gap: 5px; max-height: 250px; overflow-y: auto;">
                    <!-- Ports injected here -->
                </div>
            </div>

            <!-- Network Errors & Packet Loss -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Network Errors & Packet Loss</div>
                <div class="net-error-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 15px; text-align: center;">
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">ERRORS IN</div>
                        <div id="net-errors-in" style="font-size: 1.3rem; font-weight: bold; color: #ff6b6b;">0</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">ERRORS OUT</div>
                        <div id="net-errors-out" style="font-size: 1.3rem; font-weight: bold; color: #ff6b6b;">0</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">DROPS IN</div>
                        <div id="net-drops-in" style="font-size: 1.3rem; font-weight: bold; color: #ffa94d;">0</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">DROPS OUT</div>
                        <div id="net-drops-out" style="font-size: 1.3rem; font-weight: bold; color: #ffa94d;">0</div>
                    </div>
                </div>
                <div style="font-size: 0.9rem; color: var(--text-dim); margin-bottom: 10px;">Per-Interface Statistics</div>
                <div id="net-error-details" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 10px;">
                    <!-- Injected via JS -->
                </div>
            </div>

            <!-- Interfaces Grid -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Interfaces</div>
                <div id="net-interfaces" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
                    <!-- Injected via JS -->
                </div>
            </div>
        </div>
    </div>
    <div id="page-storage" class="page">
        <div class="grid-container">
            <!-- Disk Overview -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Disk Overview</div>
                <div id="disk-overview" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <!-- Injected via JS -->
                </div>
            </div>

            <!-- Partitions List -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Partitions & Mount Points</div>
                <div id="storage-partitions" style="display: flex; flex-direction: column; gap: 15px;">
                    <!-- Injected via JS -->
                </div>
            </div>

            <!-- Inode Usage -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Inode Usage</div>
                <div id="inode-usage" style="display: flex; flex-direction: column; gap: 10px;">
                    <!-- Injected via JS -->
                </div>
            </div>

            <!-- Disk I/O Statistics -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Disk I/O</div>
                <div id="disk-io-stats" style="display: flex; flex-direction: column; gap: 10px; max-height: 600px; overflow-y: auto;">
                    <!-- Injected via JS --></div>
            </div>
        </div>
    </div>

    <!-- SSH Page -->
    <div id="page-ssh" class="page">
        <div class="grid-container">
            <div style="grid-column: 1 / -1; display: flex; justify-content: flex-end;">
                <button id="ssh-refresh-btn" class="sort-btn" title="Refresh SSH stats">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>
            <!-- SSH Status Cards -->
            <div class="card" style="grid-column: 1 / -1; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                <div style="background: rgba(76, 175, 80, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid var(--accent-memory);">
                    <div style="font-size: 0.8rem; color: var(--text-dim);">SSH Port Status</div>
                    <div id="ssh-status" style="font-size: 1.5rem; font-weight: bold; color: var(--accent-memory);">-</div>
                </div>
                <div style="background: rgba(33, 150, 243, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid var(--accent-network);">
                    <div style="font-size: 0.8rem; color: var(--text-dim);">Active Connections</div>
                    <div id="ssh-connections" style="font-size: 1.5rem; font-weight: bold; color: var(--accent-network);">0</div>
                </div>
                <div style="background: rgba(255, 152, 0, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid var(--accent-disk);">
                    <div style="font-size: 0.8rem; color: var(--text-dim);">SSH Process Memory</div>
                    <div id="ssh-memory" style="font-size: 1.5rem; font-weight: bold; color: var(--accent-disk);">-</div>
                </div>
                <div style="background: rgba(244, 67, 54, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid #FF6B6B;">
                    <div style="font-size: 0.8rem; color: var(--text-dim);">Failed Logins</div>
                    <div id="ssh-failed-logins" style="font-size: 1.5rem; font-weight: bold; color: #FF6B6B;">0</div>
                </div>
            </div>

            <!-- SSH Active Sessions -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Active SSH Sessions</div>
                <div id="ssh-sessions" style="display: flex; flex-direction: column; gap: 8px; max-height: 300px; overflow-y: auto;">
                    <div style="color: var(--text-dim); text-align: center; padding: 20px;">No active sessions</div>
                </div>
            </div>

            <!-- SSH Authentication Methods -->
            <div class="card">
                <div class="card-title">Auth Methods</div>
                <div id="ssh-auth-methods" style="display: flex; flex-direction: column; gap: 10px;">
                    <!-- Injected via JS -->
                </div>
            </div>

            <!-- SSH Host Key Fingerprint -->
            <div class="card">
                <div class="card-title">Host Key Fingerprint (RSA)</div>
                <div class="mono-text" style="font-size: 0.85rem; word-break: break-all; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 4px; line-height: 1.4; max-height: 150px; overflow-y: auto;">
                    <div id="ssh-hostkey" style="color: var(--text-main);">-</div>
                </div>
            </div>

            <!-- SSH Session History -->
            <div class="card">
                <div class="card-title">Known Hosts</div>
                <div style="font-size: 0.9rem; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 4px;">
                    <div id="ssh-history" style="color: var(--text-main);">-</div>
                </div>
            </div>

            <!-- OOM Risk Processes -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">High Memory Processes (OOM Risk Monitoring)</div>
                <div id="ssh-oom-processes" style="display: flex; flex-direction: column; gap: 8px;">
                    <div style="color: var(--text-dim); text-align: center; padding: 20px;">All processes within safe memory range</div>
                </div>
            </div>
        </div>
    </div>

    <div id="page-gpu" class="page">
        <div class="grid-container">
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">GPU Monitor</div>
                <div id="gpu-grid" class="gpu-grid">
                    <!-- GPU cards injected via JS -->
                </div>
            </div>
        </div>
    </div>

    <div id="page-processes" class="page">
        <div class="grid-container">
            <!-- 统计面板 -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Process Statistics</div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; text-align: center;">
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">Total Processes</div>
                        <div id="proc-total" style="font-size: 1.8rem; font-weight: bold; color: var(--accent-cpu);">0</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">Total Threads</div>
                        <div id="proc-threads" style="font-size: 1.8rem; font-weight: bold; color: var(--accent-mem);">0</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">Avg CPU %</div>
                        <div id="proc-avg-cpu" style="font-size: 1.8rem; font-weight: bold; color: var(--accent-net);">0%</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">Avg Memory %</div>
                        <div id="proc-avg-mem" style="font-size: 1.8rem; font-weight: bold; color: var(--accent-disk);">0%</div>
                    </div>
                </div>
            </div>

            <!-- 搜索和排序 -->
            <div class="card" style="grid-column: 1 / -1;">
                <div style="display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
                    <input type="text" id="proc-search" placeholder="Search process..." 
                           style="flex: 1; min-width: 200px; padding: 8px 12px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; color: var(--text-main); font-family: inherit;"
                           onkeyup="filterAndRenderProcesses()">
                    <div style="display: flex; gap: 5px; flex-wrap: wrap;">
                        <button class="sort-btn active" onclick="setProcessSort('memory')" title="Sort by Memory">
                            <i class="fas fa-sort-amount-down-alt"></i> Memory
                        </button>
                        <button class="sort-btn" onclick="setProcessSort('cpu')" title="Sort by CPU">
                            <i class="fas fa-microchip"></i> CPU
                        </button>
                        <button class="sort-btn" onclick="setProcessSort('threads')" title="Sort by Threads">
                            <i class="fas fa-sitemap"></i> Threads
                        </button>
                        <button class="sort-btn" onclick="setProcessSort('uptime')" title="Sort by Uptime">
                            <i class="fas fa-hourglass-start"></i> Uptime
                        </button>
                        <button class="sort-btn" onclick="setProcessSort('tree')" title="Process Tree">
                            <i class="fas fa-tree"></i> Tree
                        </button>
                    </div>
                </div>
            </div>

            <!-- 进程列表 -->
            <div class="card" style="grid-column: 1 / -1; max-height: 600px; overflow-y: auto;">
                <div id="process-container" style="font-size: 0.9rem;">
                    <!-- 进程列表将注入这里 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 进程详情模态框 -->
    <div id="proc-detail-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 1000; overflow-y: auto;">
        <div style="background: var(--card-bg); margin: 50px auto; max-width: 700px; border-radius: 12px; padding: 20px; max-height: 80vh; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">
                <h2 id="proc-detail-name" style="margin: 0; color: var(--accent-cpu);">Process Name</h2>
                <button onclick="closeProcDetail()" style="background: none; border: none; color: var(--text-main); cursor: pointer; font-size: 1.5rem;">×</button>
            </div>
            <div id="proc-detail-content" style="display: flex; flex-direction: column; gap: 12px;">
                <!-- 详情内容将注入这里 -->
            </div>
        </div>
    </div>

    <!-- Docker Page -->
    <div id="page-docker" class="page">
        <div class="grid-container">
            <!-- Containers -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title" style="display: flex; align-items: center; gap: 10px;">
                    <span>Docker Containers</span>
                    <div style="margin-left: auto; display: flex; align-items: center; gap: 8px;">
                        <button onclick="loadDockerContainers()" title="Refresh containers" style="background: none; border: none; color: var(--text-dim); cursor: pointer;"><i class="fas fa-sync-alt"></i></button>
                        <button id="docker-prune-btn" class="docker-prune-btn" onclick="openDockerPruneConfirm()" title="Prune unused containers/images/volumes" style="display: none;">
                            <i class="fas fa-broom" style="margin-right: 6px;"></i>Prune
                        </button>
                    </div>
                </div>
                <div id="docker-prune-hint" style="display: none; font-size: 0.85rem; color: var(--text-dim); margin-bottom: 8px;">Prune will remove stopped containers, dangling images, unused networks, and build cache.</div>
                <div id="docker-prune-result" class="result-box" style="display: none; font-size: 0.85rem; margin-bottom: 8px;"></div>
                <div id="docker-summary" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 10px; margin-bottom: 10px;">
                    <div class="docker-stat-card" style="padding: 10px; border-radius: 8px; border-left: 3px solid var(--accent-mem);">
                        <div style="font-size: 0.8rem; color: var(--text-dim);">Containers</div>
                        <div id="docker-summary-containers" style="font-size: 1.2rem; font-weight: bold;">0 / 0 running</div>
                    </div>
                    <div class="docker-stat-card" style="padding: 10px; border-radius: 8px; border-left: 3px solid var(--accent-cpu);">
                        <div style="font-size: 0.8rem; color: var(--text-dim);">Images</div>
                        <div id="docker-summary-images" style="font-size: 1.2rem; font-weight: bold;">0 images</div>
                    </div>
                    <div class="docker-stat-card" style="padding: 10px; border-radius: 8px; border-left: 3px solid var(--accent-net);">
                        <div style="font-size: 0.8rem; color: var(--text-dim);">Image Size</div>
                        <div id="docker-summary-size" style="font-size: 1.2rem; font-weight: bold;">0 B</div>
                    </div>
                </div>
                <div style="margin-bottom: 10px; display: flex; gap: 10px;">
                    <input type="text" id="docker-container-search" class="search-input" placeholder="Search containers..." onkeyup="renderDockerContainers()">
                </div>
                <div class="table-scroll">
                    <table id="docker-containers-table" style="width: 100%; border-collapse: collapse; color: var(--text-main); font-size: 0.9rem;">
                        <thead>
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.1); text-align: left;">
                                <th style="padding: 10px; cursor: pointer;" onclick="setDockerContainerSort('name')">Name <i class="fas fa-sort"></i></th>
                                <th style="padding: 10px;">Image</th>
                                <th style="padding: 10px; cursor: pointer;" onclick="setDockerContainerSort('state')">State <i class="fas fa-sort"></i></th>
                                <th style="padding: 10px;">Status</th>
                                <th style="padding: 10px;">Ports</th>
                                <th style="padding: 10px;">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="docker-containers-body"></tbody>
                    </table>
                </div>
            </div>

            <!-- Images -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">
                    <span>Docker Images</span>
                    <button onclick="loadDockerImages()" style="background: none; border: none; color: var(--text-dim); cursor: pointer;"><i class="fas fa-sync-alt"></i></button>
                </div>
                <div style="margin-bottom: 10px; display: flex; gap: 10px;">
                    <input type="text" id="docker-image-search" class="search-input" placeholder="Search images..." onkeyup="renderDockerImages()">
                </div>
                <div class="table-scroll">
                    <table id="docker-images-table" style="width: 100%; border-collapse: collapse; color: var(--text-main); font-size: 0.9rem;">
                        <thead>
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.1); text-align: left;">
                                <th style="padding: 10px; cursor: pointer;" onclick="setDockerImageSort('id')">ID <i class="fas fa-sort"></i></th>
                                <th style="padding: 10px;">Tags</th>
                                <th style="padding: 10px; cursor: pointer;" onclick="setDockerImageSort('size')">Size <i class="fas fa-sort"></i></th>
                                <th style="padding: 10px; cursor: pointer;" onclick="setDockerImageSort('created')">Created <i class="fas fa-sort"></i></th>
                                <th style="padding: 10px;">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="docker-images-body"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Services Page -->
    <div id="page-services" class="page">
        <div class="grid-container">
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">
                    <span>System Services</span>
                    <button onclick="loadServices()" style="background: none; border: none; color: var(--text-dim); cursor: pointer;"><i class="fas fa-sync-alt"></i></button>
                </div>
                <div style="margin-bottom: 10px; display: flex; gap: 10px;">
                    <input type="text" id="service-search" class="search-input" placeholder="Search services..." onkeyup="renderServices()">
                </div>
                <div class="table-scroll">
                    <table id="services-table" style="width: 100%; border-collapse: collapse; color: var(--text-main); font-size: 0.9rem;">
                        <thead>
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.1); text-align: left;">
                                <th style="padding: 10px; cursor: pointer;" onclick="setServiceSort('unit')">Unit <i class="fas fa-sort"></i></th>
                                <th style="padding: 10px;">Load</th>
                                <th style="padding: 10px; cursor: pointer;" onclick="setServiceSort('active')">Active <i class="fas fa-sort"></i></th>
                                <th style="padding: 10px;">Sub</th>
                                <th style="padding: 10px;">Description</th>
                                <th style="padding: 10px;">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="services-body"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Cron Jobs Page -->
    <div id="page-cron" class="page">
        <div class="grid-container">
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">
                    <span>Cron Jobs (Root)</span>
                    <div>
                        <button id="btn-add-cron" onclick="addCronJob()" class="btn btn-success" style="margin-right: 10px; display: none;"><i class="fas fa-plus"></i> Add Job</button>
                        <button id="btn-save-cron" onclick="saveCronJobs()" class="btn btn-info" style="display: none;"><i class="fas fa-save"></i> Save Changes</button>
                        <button onclick="loadCronJobs()" class="btn btn-ghost" style="margin-left: 10px;"><i class="fas fa-sync-alt"></i></button>
                    </div>
                </div>
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; color: var(--text-main); font-size: 0.9rem;">
                        <thead>
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.1); text-align: left;">
                                <th style="padding: 10px; width: 20%;">Schedule</th>
                                <th style="padding: 10px; width: 70%;">Command</th>
                                <th style="padding: 10px; width: 10%;">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="cron-body"></tbody>
                    </table>
                </div>
                <div style="margin-top: 10px; color: var(--text-dim); font-size: 0.8rem;">
                    <i class="fas fa-info-circle"></i> Schedule format: Minute Hour Day Month Weekday (e.g., "*/5 * * * *" for every 5 mins)
                </div>
            </div>
        </div>
    </div>

    <!-- User Management Page -->
    <div id="page-users" class="page">
        <div class="grid-container">
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">
                    <span>User Management</span>
                    <button onclick="showAddUserModal()" class="btn btn-success">
                        <i class="fas fa-plus"></i> Add User
                    </button>
                </div>
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; color: var(--text-main);">
                        <thead>
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.1); text-align: left;">
                                <th style="padding: 10px;">Username</th>
                                <th style="padding: 10px;">Role</th>
                                <th style="padding: 10px;">Created At</th>
                                <th style="padding: 10px;">Last Login</th>
                                <th style="padding: 10px;">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="users-table-body">
                            <!-- Users injected here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Operation Logs Page -->
    <div id="page-logs" class="page">
        <div class="grid-container">
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Operation Logs</div>
                <div class="logs-scroll">
                    <table style="width: 100%; border-collapse: collapse; color: var(--text-main);">
                        <thead>
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.1); text-align: left;">
                                <th style="padding: 10px;">Time</th>
                                <th style="padding: 10px;">User</th>
                                <th style="padding: 10px;">Action</th>
                                <th style="padding: 10px;">Details</th>
                                <th style="padding: 10px;">IP</th>
                            </tr>
                        </thead>
                        <tbody id="logs-table-body">
                            <!-- Logs injected here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Page -->
    <div id="page-profile" class="page">
        <div class="grid-container profile-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; max-width: 1200px; margin: 0 auto;">
            <!-- Card A: Account & Security (左侧，占满高度) -->
            <div class="card profile-card-main" style="grid-row: span 2;">
                <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <div style="width: 80px; height: 80px; background: rgba(255,255,255,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; color: var(--accent-cpu);">
                        <i class="fas fa-user"></i>
                    </div>
                    <div>
                        <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 5px;" id="profile-username">-</div>
                        <div style="color: var(--text-dim); background: rgba(255,255,255,0.05); padding: 4px 10px; border-radius: 15px; display: inline-block; font-size: 0.85rem;">
                            <i class="fas fa-shield-alt" style="margin-right: 5px;"></i> <span id="profile-role">-</span>
                        </div>
                    </div>
                </div>

                <!-- Security Info -->
                <div style="margin-bottom: 25px; padding: 15px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                    <div style="font-size: 0.9rem; color: var(--text-dim); margin-bottom: 12px;"><i class="fas fa-info-circle" style="margin-right: 8px;"></i>Security Info</div>
                    <div style="display: flex; flex-direction: column; gap: 10px; font-size: 0.85rem;">
                        <div style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 5px;">
                            <span style="color: var(--text-dim);">Last Password Change</span>
                            <span id="profile-last-pwd-change" style="color: var(--text-main);">-</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 5px;">
                            <span style="color: var(--text-dim);">Last Failed Login</span>
                            <span id="profile-last-failed-login" style="color: var(--text-main);">-</span>
                        </div>
                    </div>
                </div>

                <div class="card-title"><i class="fas fa-key" style="margin-right: 10px;"></i> Change Password</div>
                <form id="change-password-form" onsubmit="handleChangePassword(event)">
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; color: var(--text-dim); font-size: 0.9rem;">Current Password</label>
                        <div style="position: relative;">
                            <i class="fas fa-lock" style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--text-dim); pointer-events: none;"></i>
                            <input type="password" id="cp-old" required style="width: 100%; padding: 12px 12px 12px 35px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px; font-family: inherit; box-sizing: border-box; transition: border-color 0.2s; font-size: 16px;">
                        </div>
                    </div>
                    <div style="margin-bottom: 25px;">
                        <label style="display: block; margin-bottom: 8px; color: var(--text-dim); font-size: 0.9rem;">New Password</label>
                        <div style="position: relative;">
                            <i class="fas fa-lock" style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--text-dim); pointer-events: none;"></i>
                            <input type="password" id="cp-new" required style="width: 100%; padding: 12px 12px 12px 35px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px; font-family: inherit; box-sizing: border-box; transition: border-color 0.2s; font-size: 16px;">
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary btn-lg" style="width: 100%;">
                        Update Password
                    </button>
                </form>
            </div>

            <!-- Card B: UI Preferences (右上) -->
            <div class="card">
                <div class="card-title" style="margin-bottom: 15px;"><i class="fas fa-palette" style="margin-right: 10px;"></i> UI Preferences</div>
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; color: var(--text-dim); font-size: 0.9rem;">Font Family</label>
                        <select id="font-select" onchange="handleFontChange()" style="width: 100%; padding: 10px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px; font-family: inherit; cursor: pointer;">
                            <option value="jetbrains-mono">JetBrains Mono</option>
                            <option value="intel-one-mono">Intel One Mono</option>
                        </select>
                    </div>
                </div>
                <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.05); color: var(--text-dim); font-size: 0.8rem;">
                    <i class="fas fa-info-circle" style="margin-right: 5px;"></i> These settings are stored in your browser.
                </div>
            </div>

            <!-- Card C: System Administration (右下，仅管理员可见) -->
            <div class="card" id="system-admin-card" style="display: none;">
                <div class="card-title" style="margin-bottom: 15px;">
                    <i class="fas fa-cogs" style="margin-right: 10px;"></i> System Administration
                    <span style="background: var(--accent-cpu); color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.7rem; margin-left: 10px;">Admin</span>
                </div>
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; color: var(--text-dim); font-size: 0.9rem;">Monitoring Mode</label>
                        <select id="monitoring-mode-select" onchange="handleMonitoringModeChange()" style="width: 100%; padding: 10px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px; font-family: inherit; cursor: pointer;">
                            <option value="on-demand">On-Demand (Recommended)</option>
                            <option value="always-on">Always-On</option>
                        </select>
                    </div>
                    <div style="background: rgba(0,0,0,0.15); padding: 12px; border-radius: 6px; font-size: 0.85rem; line-height: 1.5;">
                        <div style="margin-bottom: 10px;">
                            <strong style="color: var(--accent-mem);">On-Demand</strong>
                            <span style="color: var(--text-dim);">: Collectors run only when browsers are connected. Saves CPU/IO when idle.</span>
                        </div>
                        <div>
                            <strong style="color: var(--accent-net);">Always-On</strong>
                            <span style="color: var(--text-dim);">: Collectors run continuously. Required for Webhook alerts when no one is watching.</span>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.05); color: var(--text-dim); font-size: 0.8rem;">
                    <i class="fas fa-server" style="margin-right: 5px;"></i> These settings affect all users and are stored on the server.
                </div>
            </div>

            <!-- Card D: Role & Permissions -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title" style="display: flex; align-items: center; justify-content: space-between;">
                    <span><i class="fas fa-user-shield" style="margin-right: 10px;"></i> Role & Permissions</span>
                </div>
                <div id="profile-permissions-container">
                    <div style="padding: 20px; text-align: center; color: var(--text-dim);">Loading permissions...</div>
                </div>
            </div>

            <!-- Card E: Active Sessions -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title" style="display: flex; align-items: center; justify-content: space-between;">
                    <span><i class="fas fa-desktop" style="margin-right: 10px;"></i> Active Sessions</span>
                    <div style="display: flex; gap: 10px;">
                        <button onclick="loadProfileSessions()" class="btn btn-ghost" title="Refresh">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                        <button onclick="revokeOtherSessions()" id="btn-revoke-others" class="btn btn-outline-danger" style="display: none;">
                            <i class="fas fa-sign-out-alt"></i> Logout Other Sessions
                        </button>
                    </div>
                </div>
                <div id="profile-sessions-container" style="display: flex; flex-direction: column; gap: 10px; max-height: 300px; overflow-y: auto;">
                    <div style="padding: 20px; text-align: center; color: var(--text-dim);">Loading sessions...</div>
                </div>
            </div>

            <!-- Card F: Login History -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title" style="display: flex; align-items: center; justify-content: space-between;">
                    <span><i class="fas fa-history" style="margin-right: 10px;"></i> Recent Logins</span>
                    <button onclick="loadProfileLoginHistory()" class="btn btn-ghost" title="Refresh">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
                <div id="profile-login-history-container" style="overflow-x: auto;">
                    <div style="padding: 20px; text-align: center; color: var(--text-dim);">Loading login history...</div>
                </div>
            </div>

            <!-- Card G: Alert Preferences -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title" style="display: flex; align-items: center; justify-content: space-between;">
                    <span><i class="fas fa-bell" style="margin-right: 10px;"></i> Alert Preferences</span>
                    <button onclick="saveProfileAlertPreferences()" class="btn btn-primary">
                        <i class="fas fa-save"></i> Save
                    </button>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                    <!-- Alert Subscriptions -->
                    <div style="background: rgba(0,0,0,0.15); padding: 15px; border-radius: 8px;">
                        <div style="font-size: 0.9rem; color: var(--text-dim); margin-bottom: 12px;"><i class="fas fa-check-square" style="margin-right: 8px;"></i>Subscriptions</div>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                <input type="checkbox" id="pref-alert-cpu" style="accent-color: var(--accent-cpu);">
                                <span style="font-size: 0.9rem;">CPU Alerts</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                <input type="checkbox" id="pref-alert-memory" style="accent-color: var(--accent-mem);">
                                <span style="font-size: 0.9rem;">Memory Alerts</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                <input type="checkbox" id="pref-alert-disk" style="accent-color: var(--accent-disk);">
                                <span style="font-size: 0.9rem;">Disk Alerts</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                <input type="checkbox" id="pref-alert-network" style="accent-color: var(--accent-net);">
                                <span style="font-size: 0.9rem;">Network Alerts</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                <input type="checkbox" id="pref-alert-docker" style="accent-color: #2496ED;">
                                <span style="font-size: 0.9rem;">Docker Alerts</span>
                            </label>
                        </div>
                    </div>

                    <!-- Notification Method -->
                    <div style="background: rgba(0,0,0,0.15); padding: 15px; border-radius: 8px;">
                        <div style="font-size: 0.9rem; color: var(--text-dim); margin-bottom: 12px;"><i class="fas fa-paper-plane" style="margin-right: 8px;"></i>Notification Method</div>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                <input type="checkbox" id="pref-notify-panel" style="accent-color: var(--accent-cpu);" checked>
                                <span style="font-size: 0.9rem;">In-Panel Notifications</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                <input type="checkbox" id="pref-notify-email" style="accent-color: var(--accent-cpu);">
                                <span style="font-size: 0.9rem;">Email</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                <input type="checkbox" id="pref-notify-webhook" style="accent-color: var(--accent-cpu);">
                                <span style="font-size: 0.9rem;">Webhook</span>
                            </label>
                        </div>
                    </div>

                    <!-- Quiet Hours -->
                    <div style="background: rgba(0,0,0,0.15); padding: 15px; border-radius: 8px;">
                        <div style="font-size: 0.9rem; color: var(--text-dim); margin-bottom: 12px;"><i class="fas fa-moon" style="margin-right: 8px;"></i>Quiet Hours (DND)</div>
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; margin-bottom: 12px;">
                            <input type="checkbox" id="pref-dnd-enabled" style="accent-color: var(--accent-cpu);">
                            <span style="font-size: 0.9rem;">Enable Quiet Hours</span>
                        </label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <div>
                                <label style="display: block; font-size: 0.8rem; color: var(--text-dim); margin-bottom: 4px;">Start</label>
                                <input type="time" id="pref-dnd-start" value="22:00" style="background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; padding: 6px 10px; border-radius: 4px; font-family: inherit;">
                            </div>
                            <div>
                                <label style="display: block; font-size: 0.8rem; color: var(--text-dim); margin-bottom: 4px;">End</label>
                                <input type="time" id="pref-dnd-end" value="08:00" style="background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); color: white; padding: 6px 10px; border-radius: 4px; font-family: inherit;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add User Modal -->
    <div id="add-user-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; align-items: center; justify-content: center;">
        <div class="card" style="width: 400px;">
            <div class="card-title">
                <span>Add New User</span>
                <i class="fas fa-times" onclick="document.getElementById('add-user-modal').style.display='none'" style="cursor: pointer;"></i>
            </div>
            <form onsubmit="handleAddUser(event)">
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; color: var(--text-dim);">Username</label>
                    <input type="text" id="new-username" class="form-input" required style="width: 100%;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; color: var(--text-dim);">Password</label>
                    <input type="password" id="new-password" class="form-input" required style="width: 100%;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; color: var(--text-dim);">Role</label>
                    <select id="new-role" class="form-input" style="width: 100%;">
                        <option value="user">User</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-success btn-lg" style="width: 100%;">Create User</button>
            </form>
        </div>
    </div>

    <!-- Reset Password Modal -->
    <div id="reset-password-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; align-items: center; justify-content: center;">
        <div class="card" style="width: 420px;">
            <div class="card-title">
                <span>Reset Password</span>
                <i class="fas fa-times" onclick="hideResetPasswordModal()" style="cursor: pointer;"></i>
            </div>
            <form onsubmit="handleResetPasswordSubmit(event)">
                <input type="hidden" id="reset-password-username">
                <div style="margin-bottom: 12px; color: var(--text-dim); font-size: 0.9rem;">
                    User: <span id="reset-password-username-text" style="color: var(--text-main); font-weight: bold;"></span>
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; color: var(--text-dim);">New Password</label>
                    <input type="password" id="reset-password-new" class="form-input" required style="width: 100%;">
                </div>
                <div style="display: flex; gap: 10px;">
                    <button type="submit" class="btn btn-success btn-lg" style="flex: 1;">Confirm</button>
                    <button type="button" onclick="hideResetPasswordModal()" class="btn btn-secondary btn-lg" style="flex: 1;">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Docker Logs Modal -->
    <div id="docker-logs-modal" style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 1100; align-items: center; justify-content: center;">
        <div class="card" style="width: 90%; max-width: 900px; max-height: 85vh; overflow: hidden; display: flex; flex-direction: column;">
            <div class="card-title" style="display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-file-alt" style="color: var(--accent-net);"></i>
                <span id="docker-logs-title">Container Logs</span>
                <div style="margin-left: auto; display: flex; gap: 8px; align-items: center;">
                    <button id="docker-logs-load-more" onclick="loadMoreDockerLogs()" class="btn btn-secondary">
                        <i class="fas fa-plus-circle"></i> Load more
                    </button>
                    <button onclick="closeDockerLogsModal()" class="btn btn-ghost" style="font-size: 1.5rem;">&times;</button>
                </div>
            </div>
            <div class="mono-text" style="flex: 1; overflow: auto; background: rgba(0,0,0,0.3); border: 1px solid var(--glass-border); border-radius: 8px; padding: 14px; color: var(--text-main);">
                <pre id="docker-logs-content" style="margin: 0; white-space: pre-wrap; font-size: 0.85rem; line-height: 1.5;"></pre>
            </div>
        </div>
    </div>

    </div> <!-- End main-content -->
</div> <!-- End app-container -->

    <script src="{{ asset "/static/js/dialog.js" }}"></script>
    <script src="{{ asset "/static/js/auth.js" }}"></script>
    <script src="{{ asset "/static/js/state.js" }}"></script>
    <script src="{{ asset "/static/js/util.js" }}"></script>
    <script src="{{ asset "/static/js/ascii-logos.js" }}"></script>
    <script src="{{ asset "/static/js/api.js" }}"></script>
    <script src="{{ asset "/static/js/charts/sparkline.js" }}"></script>
    <script src="{{ asset "/static/js/charts/memoryPie.js" }}"></script>
    <script src="{{ asset "/static/js/render/gpu.js" }}"></script>
    <script src="{{ asset "/static/js/render/processes.js" }}"></script>
    <script src="{{ asset "/static/js/render/stats.js" }}"></script>
    <script src="{{ asset "/static/js/ws.js" }}"></script>
    <script src="{{ asset "/static/js/ui/navigation.js" }}"></script>
    <script src="{{ asset "/static/js/app.js" }}"></script>
</body>
</html>
