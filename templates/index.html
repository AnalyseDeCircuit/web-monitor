<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#121212">
    <meta name="description" content="Advanced System Monitor - Real-time CPU, Memory, GPU, Network, Docker, and SSH monitoring">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="System Monitor">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'><rect fill='%23121212' width='192' height='192'/><text x='50%' y='50%' font-size='100' font-weight='bold' fill='%23ff4757' text-anchor='middle' dominant-baseline='central'>M</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'><rect fill='%23121212' width='192' height='192'/><text x='50%' y='50%' font-size='100' font-weight='bold' fill='%23ff4757' text-anchor='middle' dominant-baseline='central'>M</text></svg>">
    <title>System Monitor</title>
    <link rel="stylesheet" href="{{ asset "/static/vendor/jetbrains-mono/css/jetbrains-mono.css" }}">
    <link rel="stylesheet" href="{{ asset "/static/vendor/font-awesome/css/all.min.css" }}">
    <link rel="stylesheet" href="{{ asset "/static/css/style.css" }}">
    <script src="{{ asset "/static/vendor/chartjs/chart.min.js" }}"></script>
</head>
<body>
    <!-- Mobile Menu Button -->
    <button class="mobile-menu-btn" id="mobile-menu-btn" onclick="toggleMobileMenu()" title="Toggle Menu">
        <i class="fas fa-bars"></i>
    </button>
    
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div style="display: flex; align-items: center; margin-bottom: 30px;">
                <div class="sidebar-title">
                    <i class="fas fa-bolt" style="color: var(--accent-cpu);"></i>
                    <span>MONITOR</span>
                </div>
                <button class="sidebar-toggle" id="sidebar-toggle" onclick="toggleSidebar()" title="Toggle Sidebar">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>
            <div class="nav-item active" onclick="switchPage('general')">
                <i class="fas fa-home" title="General Dashboard"></i>
                <span>General</span>
            </div>
            <div class="nav-item" onclick="switchPage('cpu')">
                <i class="fas fa-microchip" title="CPU Details"></i>
                <span>CPU</span>
            </div>
            <div class="nav-item" onclick="switchPage('gpu')">
                <i class="fas fa-tv" title="GPU Monitor"></i>
                <span>GPU</span>
            </div>
            <div class="nav-item" onclick="switchPage('memory')">
                <i class="fas fa-memory" title="Memory"></i>
                <span>Memory</span>
            </div>
            <div class="nav-item" onclick="switchPage('processes')">
                <i class="fas fa-list" title="Processes"></i>
                <span>Processes</span>
            </div>
            <div class="nav-item" onclick="switchPage('storage')">
                <i class="fas fa-hdd" title="Storage"></i>
                <span>Storage</span>
            </div>
            
            <!-- Network Group -->
            <div class="nav-item" onclick="toggleNetworkSubmenu()">
                <i class="fas fa-network-wired" title="Network"></i>
                <span>Network</span>
                <i class="fas fa-chevron-down" style="margin-left: auto; font-size: 0.8rem;" id="net-submenu-icon"></i>
            </div>
            <div id="network-submenu" style="display: none; flex-direction: column; padding-left: 20px; background: rgba(0,0,0,0.2);">
                <div class="nav-item" onclick="switchPage('net-traffic')" style="font-size: 0.9rem;">
                    <i class="fas fa-chart-line"></i>
                    <span>Traffic</span>
                </div>
                <div class="nav-item" onclick="switchPage('ssh')" style="font-size: 0.9rem;">
                    <i class="fas fa-lock"></i>
                    <span>SSH</span>
                </div>
            </div>

            <div class="nav-item" onclick="switchPage('docker')">
                <i class="fab fa-docker" title="Docker Management"></i>
                <span>Docker</span>
            </div>
            <div class="nav-item" onclick="switchPage('services')">
                <i class="fas fa-cogs" title="System Services"></i>
                <span>Services</span>
            </div>
            <div class="nav-item" onclick="switchPage('cron')">
                <i class="fas fa-clock" title="Cron Jobs"></i>
                <span>Cron</span>
            </div>
            
            <div class="nav-item" onclick="switchPage('alerts')">
                <i class="fas fa-bell" title="Alerts"></i>
                <span>Alerts</span>
            </div>

            <div style="margin-top: auto;"></div>

            <!-- Admin Only -->
            <div class="nav-item" id="nav-users" onclick="switchPage('users')" style="display: none;">
                <i class="fas fa-users" title="User Management"></i>
                <span>Users</span>
            </div>
            <div class="nav-item" id="nav-logs" onclick="switchPage('logs')" style="display: none;">
                <i class="fas fa-history" title="Operation Logs"></i>
                <span>Logs</span>
            </div>
            
            <!-- All Users -->
            <div class="nav-item" onclick="switchPage('profile')">
                <i class="fas fa-user-cog" title="Profile"></i>
                <span>Profile</span>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <div style="display: flex; align-items: center; gap: 15px;">
                    <h1 id="page-title">General Dashboard</h1>
                    <div id="status-dot" class="status-dot" title="Connection Status"></div>
                    <select id="interval-select" onchange="changeInterval()" style="background: rgba(255,255,255,0.1); color: var(--text-main); border: none; padding: 5px; border-radius: 4px; font-family: inherit; font-size: 0.8rem; cursor: pointer;">
                        <option value="2">2s</option>
                        <option value="5" selected>5s</option>
                        <option value="10">10s</option>
                        <option value="20">20s</option>
                        <option value="30">30s</option>
                        <option value="60">60s</option>
                    </select>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <button class="theme-toggle" id="theme-toggle" onclick="toggleTheme()" title="切换主题">
                        <i class="fas fa-moon" id="theme-icon"></i>
                    </button>
                    <div id="boot-time" class="boot-time">Booting...</div>
                </div>
            </div>

            <!-- Page: General -->
            <div id="page-general" class="page active">
                <div class="grid-container">
        <!-- System Info (Fastfetch) -->
        <div class="card" style="grid-column: 1 / -1;">
            <div class="card-title">System Information</div>
            <div class="fastfetch-container">
                <div class="sys-info-list" id="sys-info-list">
                    <div>Loading system info...</div>
                </div>
            </div>
        </div>

        <!-- Power Profile Card -->
        <div class="card" id="power-profile-card" style="display: none; grid-column: 1 / -1;">
            <div class="card-title">Power Profile</div>
            <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;" id="power-profile-controls">
                <!-- Buttons will be injected here -->
            </div>
        </div>

        <!-- CPU Card -->
        <div class="card">
            <div class="card-title">
                <span>CPU</span>
                <span id="cpu-freq" class="freq-badge">0 MHz</span>
            </div>
            <div class="stat-group">
                <div class="stat-label">
                    <span>Total Load</span>
                    <span id="cpu-total-text">0%</span>
                </div>
                <div class="progress-bg">
                    <div id="cpu-total-bar" class="progress-fill cpu-fill" style="width: 0%"></div>
                </div>
            </div>
            <div id="cpu-cores" class="cpu-grid">
                <!-- Cores injected here -->
            </div>
        </div>

        <!-- Memory Card -->
        <div class="card">
            <div class="card-title">Memory</div>
            <div class="stat-group">
                <div class="stat-label">
                    <span>RAM Usage</span>
                    <span id="mem-text">0 / 0</span>
                </div>
                <div class="progress-bg">
                    <div id="mem-bar" class="progress-fill mem-fill" style="width: 0%"></div>
                </div>
                <div style="text-align: right; font-size: 0.8rem; color: var(--text-dim); margin-top: 5px;">
                    <span id="mem-percent">0%</span>
                </div>
            </div>
            <div id="mem-details" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.85rem; margin-top: 15px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 10px;">
                <!-- Details injected here -->
            </div>
            
            <div style="margin-top: 15px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 10px;">
                <div style="font-size: 0.9rem; margin-bottom: 10px; color: var(--text-dim);">Top Processes</div>
                <div id="processes-container" style="font-size: 0.85rem; display: flex; flex-direction: column; gap: 5px; max-height: 200px; overflow-y: auto; padding-right: 5px;">
                    <!-- Processes injected here -->
                </div>
            </div>
        </div>

        <!-- Sensors Card -->
        <div class="card">
            <div class="card-title">Sensors & Power</div>
            <div id="sensors-container"></div>
            <div id="power-container" style="margin-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 10px;"></div>
        </div>

        <!-- Network Card -->
        <div class="card">
            <div class="card-title">Network</div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div class="net-box">
                    <div style="font-size: 0.8rem; color: var(--text-dim);">UPLOAD SPEED</div>
                    <div id="net-speed-sent" class="net-value" style="color: var(--accent-cpu)">0 B/s</div>
                </div>
                 <div class="net-box">
                    <div style="font-size: 0.8rem; color: var(--text-dim);">DOWNLOAD SPEED</div>
                    <div id="net-speed-recv" class="net-value" style="color: var(--accent-mem)">0 B/s</div>
                </div>
            </div>
        </div>

        <!-- SSH Card -->
        <div class="card">
            <div class="card-title">SSH Status</div>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <div>
                    <span style="color: var(--text-dim);">Service:</span>
                    <span id="general-ssh-status" style="font-weight: bold; margin-left: 5px;">-</span>
                </div>
                <div>
                    <span style="color: var(--text-dim);">Connections:</span>
                    <span id="general-ssh-connections" style="font-weight: bold; margin-left: 5px; color: var(--accent-net);">0</span>
                </div>
            </div>
            <div style="font-size: 0.9rem; color: var(--text-dim); margin-bottom: 5px;">Active Sessions</div>
            <div id="general-ssh-sessions" style="font-size: 0.85rem; display: flex; flex-direction: column; gap: 5px; height: 150px; overflow-y: auto; background: rgba(0,0,0,0.2); border-radius: 4px; padding: 5px;">
                <!-- Sessions injected here -->
            </div>
        </div>

        <!-- GPU Summary Card (General Page) -->
        <div class="card">
            <div class="card-title">GPU Summary</div>
            <div style="font-size: 0.9rem; color: var(--text-dim); margin-bottom: 8px;">
                <span>Name:</span>
                <span id="general-gpu-name" style="font-weight: bold; margin-left: 5px;">-</span>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.85rem;">
                <div>
                    <div style="color: var(--text-dim);">Temp</div>
                    <div id="general-gpu-temp" style="font-weight: bold;">-</div>
                </div>
                <div>
                    <div style="color: var(--text-dim);">Load</div>
                    <div id="general-gpu-load" style="font-weight: bold;">-</div>
                </div>
                <div>
                    <div style="color: var(--text-dim);">Freq</div>
                    <div id="general-gpu-freq" style="font-weight: bold;">-</div>
                </div>
                <div>
                    <div style="color: var(--text-dim);">VRAM</div>
                    <div id="general-gpu-vram" style="font-weight: bold;">-</div>
                </div>
            </div>
            <div id="general-gpu-note" style="margin-top: 8px; font-size: 0.75rem; color: var(--text-dim);"></div>
        </div>

        <!-- Disk Card -->
        <div class="card" style="grid-column: 1 / -1;">
            <div class="card-title">Storage</div>
            <div id="disk-container" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <!-- Disks injected here -->
            </div>
        </div>
    </div> <!-- End grid-container -->
    </div> <!-- End page-general -->

        <!-- Page: Alerts -->
        <div id="page-alerts" class="page">
            <div class="card">
                <div class="card-title">Alert Configuration</div>
                <div style="max-width: 600px;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: var(--text-dim);">Enable Alerts</label>
                        <label class="switch">
                            <input type="checkbox" id="alert-enabled">
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: var(--text-dim);">Webhook URL</label>
                        <input type="text" id="alert-webhook" style="width: 100%; padding: 8px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: var(--text-main); border-radius: 4px;" placeholder="https://hooks.slack.com/...">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: var(--text-dim);">CPU Threshold (%)</label>
                        <input type="number" id="alert-cpu" min="0" max="100" style="width: 100px; padding: 8px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: var(--text-main); border-radius: 4px;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: var(--text-dim);">Memory Threshold (%)</label>
                        <input type="number" id="alert-mem" min="0" max="100" style="width: 100px; padding: 8px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: var(--text-main); border-radius: 4px;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; color: var(--text-dim);">Disk Threshold (%)</label>
                        <input type="number" id="alert-disk" min="0" max="100" style="width: 100px; padding: 8px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: var(--text-main); border-radius: 4px;">
                    </div>
                    <button onclick="saveAlerts()" style="background: var(--accent-cpu); color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-weight: bold;">Save Configuration</button>
                </div>
            </div>
        </div>

    <!-- Other Pages (Placeholders) -->
    <div id="page-cpu" class="page">
        <div class="grid-container">
            <!-- Load Average & Stats -->
            <div class="card">
                <div class="card-title">Load Average & Stats</div>
                <div style="display: flex; justify-content: space-around; text-align: center; margin-bottom: 20px;">
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">1 Min</div>
                        <div id="cpu-load-1" style="font-size: 1.2rem; font-weight: bold; color: var(--accent-cpu);">0.00</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">5 Min</div>
                        <div id="cpu-load-5" style="font-size: 1.2rem; font-weight: bold; color: var(--accent-cpu);">0.00</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">15 Min</div>
                        <div id="cpu-load-15" style="font-size: 1.2rem; font-weight: bold; color: var(--accent-cpu);">0.00</div>
                    </div>
                </div>
                <div class="stat-group">
                    <div class="stat-label">
                        <span>Context Switches</span>
                        <span id="cpu-ctx-switches" style="color: var(--text-main);">0</span>
                    </div>
                    <div class="stat-label">
                        <span>Interrupts</span>
                        <span id="cpu-interrupts" style="color: var(--text-main);">0</span>
                    </div>
                    <div class="stat-label">
                        <span>Syscalls</span>
                        <span id="cpu-syscalls" style="color: var(--text-main);">0</span>
                    </div>
                </div>
            </div>

            <!-- CPU Times Breakdown -->
            <div class="card">
                <div class="card-title">CPU Time Distribution</div>
                <div id="cpu-times-container" style="display: flex; flex-direction: column; gap: 10px;">
                    <!-- Injected via JS -->
                </div>
            </div>

            <!-- CPU Information -->
            <div class="card">
                <div class="card-title">CPU Information</div>
                <div id="cpu-info" style="display: flex; flex-direction: column; gap: 8px; font-size: 0.9rem;">
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: var(--text-dim);">Model:</span>
                        <span id="cpu-model" style="font-weight: 500;">-</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: var(--text-dim);">Architecture:</span>
                        <span id="cpu-arch" style="font-weight: 500;">-</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: var(--text-dim);">Cores:</span>
                        <span id="cpu-info-cores" style="font-weight: 500;">-</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: var(--text-dim);">Threads:</span>
                        <span id="cpu-threads" style="font-weight: 500;">-</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: var(--text-dim);">Frequency:</span>
                        <span id="cpu-freq-range" style="font-weight: 500;">-</span>
                    </div>
                </div>
            </div>

            <!-- CPU Temperature Trends -->
            <div class="card">
                <div class="card-title">Temperature Trends (Last 60s)</div>
                <div id="cpu-temp-trend" style="height: 120px; position: relative; display: flex; align-items: flex-end; gap: 2px; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 4px;">
                    <!-- Bar chart injected here -->
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 0.85rem;">
                    <span style="color: var(--text-dim);">Average Temp:</span>
                    <span id="cpu-temp-avg" style="font-weight: bold; color: #ff6b6b;">0°C</span>
                </div>
            </div>

            <!-- Detailed Core Grid -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Per Core Usage</div>
                <div id="cpu-detailed-cores" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px;">
                    <!-- Injected via JS -->
                </div>
            </div>
        </div>
    </div>
    <div id="page-memory" class="page">
        <div class="grid-container">
            <!-- Memory Usage -->
            <div class="card">
                <div class="card-title">Memory Usage</div>
                <div class="stat-group">
                    <div class="stat-label">
                        <span>RAM Usage</span>
                        <span id="mem-page-text">0 / 0</span>
                    </div>
                    <div class="progress-bg">
                        <div id="mem-page-bar" class="progress-fill mem-fill" style="width: 0%"></div>
                    </div>
                    <div style="text-align: right; font-size: 0.8rem; color: var(--text-dim); margin-top: 5px;">
                        <span id="mem-page-percent">0%</span>
                    </div>
                </div>
                <div id="mem-page-details" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.85rem; margin-top: 15px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 10px;">
                    <!-- Details injected here -->
                </div>
            </div>

            <!-- Memory Usage Trends -->
            <div class="card">
                <div class="card-title">Memory Usage Trends (Last 60s)</div>
                <div id="mem-trend" style="height: 120px; position: relative; display: flex; align-items: flex-end; gap: 2px; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 4px;">
                    <!-- Bar chart injected here -->
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 0.85rem;">
                    <span style="color: var(--text-dim);">Current Usage:</span>
                    <span id="mem-trend-current" style="font-weight: bold; color: var(--accent-mem);">0%</span>
                </div>
            </div>

            <!-- Swap Usage -->
            <div class="card">
                <div class="card-title">Swap Usage</div>
                <div class="stat-group">
                    <div class="stat-label">
                        <span>Swap</span>
                        <span id="swap-page-text">0 / 0</span>
                    </div>
                    <div class="progress-bg">
                        <div id="swap-page-bar" class="progress-fill disk-fill" style="width: 0%"></div>
                    </div>
                    <div style="text-align: right; font-size: 0.8rem; color: var(--text-dim); margin-top: 5px;">
                        <span id="swap-page-percent">0%</span>
                    </div>
                </div>
            </div>

            <!-- Memory Pie Chart -->
            <div class="card">
                <div class="card-title">Memory Distribution</div>
                <div style="display: flex; flex-direction: column; gap: 15px; align-items: center; padding: 10px;">
                    <svg id="mem-pie-chart" width="180" height="180" style="margin: 0 auto;"></svg>
                    <div id="mem-pie-legend" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; width: 100%; font-size: 0.85rem;">
                        <!-- Legend injected here -->
                    </div>
                </div>
            </div>

            <!-- Process Manager -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">
                    <span>Process Manager</span>
                    <span id="proc-count" style="font-size: 0.8rem; color: var(--text-dim); font-weight: normal;">0 processes</span>
                </div>
                <div style="overflow-x: auto; max-height: 500px; overflow-y: auto;">
                    <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem; table-layout: fixed;">
                        <thead style="position: sticky; top: 0; background: var(--card-bg); z-index: 1;">
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.1); text-align: left;">
                                <th style="padding: 10px; width: 80px; color: var(--text-dim); cursor: pointer; font-family: 'JetBrains Mono', monospace;" onclick="setSort('pid')">PID <i class="fas fa-sort"></i></th>
                
                                    <th style="padding: 10px; color: var(--text-dim); cursor: pointer;" onclick="setSort('name')">Name <i class="fas fa-sort"></i></th>
                                    
                                    <th style="padding: 10px; width: 100px; color: var(--text-dim);">User</th>
                                    
                                    <th style="padding: 10px; width: 80px; text-align: right; color: var(--text-dim); font-family: 'JetBrains Mono', monospace;">Threads</th>
                                    
                                    <th style="padding: 10px; width: 80px; text-align: right; color: var(--text-dim); font-family: 'JetBrains Mono', monospace;">CPU%</th>
                                    
                                    <th style="padding: 10px; width: 80px; text-align: right; color: var(--text-dim); cursor: pointer;font-family: 'JetBrains Mono', monospace;" onclick="setSort('memory_percent')">Mem% <i class="fas fa-sort"></i></th>
                            </tr>
                        </thead>
                    <tbody id="process-table-body">
                </tbody>
                </table>
            </div>
            </div>
        </div>
    </div>
    <div id="page-net-traffic" class="page">
        <div class="grid-container">
            <!-- Global Network Stats -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Global Traffic</div>
                <div class="network-stats">
                    <div class="net-box">
                        <div style="font-size: 0.8rem; color: var(--text-dim);">UPLOAD SPEED</div>
                        <div id="net-page-speed-sent" class="net-value" style="color: var(--accent-cpu)">0 B/s</div>
                    </div>
                    <div class="net-box">
                        <div style="font-size: 0.8rem; color: var(--text-dim);">DOWNLOAD SPEED</div>
                        <div id="net-page-speed-recv" class="net-value" style="color: var(--accent-mem)">0 B/s</div>
                    </div>
                    <div class="net-box">
                        <div style="font-size: 0.8rem; color: var(--text-dim);">TOTAL SENT</div>
                        <div id="net-page-sent" class="net-value">0 B</div>
                    </div>
                    <div class="net-box">
                        <div style="font-size: 0.8rem; color: var(--text-dim);">TOTAL RECV</div>
                        <div id="net-page-recv" class="net-value">0 B</div>
                    </div>
                </div>
            </div>

            <!-- Connection State Details -->
            <div class="card">
                <div class="card-title">TCP Connection States</div>
                <div class="net-state-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; font-size: 0.85rem;">
                    <div style="display: flex; justify-content: space-between; padding: 5px; background: var(--card-bg); border-radius: 4px;">
                        <span style="color: var(--text-dim);">ESTABLISHED</span>
                        <span id="tcp-established" style="font-weight: bold; color: var(--accent-cpu);">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 5px; background: var(--card-bg); border-radius: 4px;">
                        <span style="color: var(--text-dim);">TIME_WAIT</span>
                        <span id="tcp-time-wait" style="font-weight: bold; color: var(--text-dim);">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 5px; background: var(--card-bg); border-radius: 4px;">
                        <span style="color: var(--text-dim);">CLOSE_WAIT</span>
                        <span id="tcp-close-wait" style="font-weight: bold;">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 5px; background: var(--card-bg); border-radius: 4px;">
                        <span style="color: var(--text-dim);">LISTEN</span>
                        <span id="tcp-listen" style="font-weight: bold; color: var(--accent-mem);">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 5px; background: var(--card-bg); border-radius: 4px;">
                        <span style="color: var(--text-dim);">SYN_SENT</span>
                        <span id="tcp-syn-sent" style="font-weight: bold;">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 5px; background: var(--card-bg); border-radius: 4px;">
                        <span style="color: var(--text-dim);">SYN_RECV</span>
                        <span id="tcp-syn-recv" style="font-weight: bold;">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 5px; background: var(--card-bg); border-radius: 4px;">
                        <span style="color: var(--text-dim);">FIN_WAIT1</span>
                        <span id="tcp-fin-wait1" style="font-weight: bold;">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 5px; background: var(--card-bg); border-radius: 4px;">
                        <span style="color: var(--text-dim);">FIN_WAIT2</span>
                        <span id="tcp-fin-wait2" style="font-weight: bold;">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 5px; background: var(--card-bg); border-radius: 4px;">
                        <span style="color: var(--text-dim);">LAST_ACK</span>
                        <span id="tcp-last-ack" style="font-weight: bold;">0</span>
                    </div>
                </div>
            </div>

            <!-- Protocol Stats -->
            <div class="card">
                <div class="card-title">Active Connections</div>
                <div class="net-active-grid" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; text-align: center;">
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">TCP</div>
                        <div id="net-tcp-count" style="font-size: 1.5rem; font-weight: bold; color: var(--accent-cpu);">0</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">UDP</div>
                        <div id="net-udp-count" style="font-size: 1.5rem; font-weight: bold; color: var(--accent-mem);">0</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">TCP TimeWait</div>
                        <div id="net-tcp-tw" style="font-size: 1.5rem; font-weight: bold; color: var(--text-dim);">0</div>
                    </div>
                </div>
            </div>

            <!-- Listening Ports -->
            <div class="card">
                <div class="card-title">Listening Ports</div>
                <div id="listening-ports" style="font-size: 0.85rem; display: flex; flex-direction: column; gap: 5px; max-height: 250px; overflow-y: auto;">
                    <!-- Ports injected here -->
                </div>
            </div>

            <!-- Network Errors & Packet Loss -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Network Errors & Packet Loss</div>
                <div class="net-error-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 15px; text-align: center;">
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">ERRORS IN</div>
                        <div id="net-errors-in" style="font-size: 1.3rem; font-weight: bold; color: #ff6b6b;">0</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">ERRORS OUT</div>
                        <div id="net-errors-out" style="font-size: 1.3rem; font-weight: bold; color: #ff6b6b;">0</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">DROPS IN</div>
                        <div id="net-drops-in" style="font-size: 1.3rem; font-weight: bold; color: #ffa94d;">0</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">DROPS OUT</div>
                        <div id="net-drops-out" style="font-size: 1.3rem; font-weight: bold; color: #ffa94d;">0</div>
                    </div>
                </div>
                <div style="font-size: 0.9rem; color: var(--text-dim); margin-bottom: 10px;">Per-Interface Statistics</div>
                <div id="net-error-details" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 10px;">
                    <!-- Injected via JS -->
                </div>
            </div>

            <!-- Interfaces Grid -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Interfaces</div>
                <div id="net-interfaces" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
                    <!-- Injected via JS -->
                </div>
            </div>
        </div>
    </div>
    <div id="page-storage" class="page">
        <div class="grid-container">
            <!-- Disk Overview -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Disk Overview</div>
                <div id="disk-overview" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <!-- Injected via JS -->
                </div>
            </div>

            <!-- Partitions List -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Partitions & Mount Points</div>
                <div id="storage-partitions" style="display: flex; flex-direction: column; gap: 15px;">
                    <!-- Injected via JS -->
                </div>
            </div>

            <!-- Inode Usage -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Inode Usage</div>
                <div id="inode-usage" style="display: flex; flex-direction: column; gap: 10px;">
                    <!-- Injected via JS -->
                </div>
            </div>

            <!-- Disk I/O Statistics -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Disk I/O</div>
                <div id="disk-io-stats" style="display: flex; flex-direction: column; gap: 10px; max-height: 600px; overflow-y: auto;">
                    <!-- Injected via JS --></div>
            </div>
        </div>
    </div>

    <!-- SSH Page -->
    <div id="page-ssh" class="page">
        <div class="grid-container">
            <div style="grid-column: 1 / -1; display: flex; justify-content: flex-end;">
                <button id="ssh-refresh-btn" class="sort-btn" title="Refresh SSH stats">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>
            <!-- SSH Status Cards -->
            <div class="card" style="grid-column: 1 / -1; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                <div style="background: rgba(76, 175, 80, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid var(--accent-memory);">
                    <div style="font-size: 0.8rem; color: var(--text-dim);">SSH Port Status</div>
                    <div id="ssh-status" style="font-size: 1.5rem; font-weight: bold; color: var(--accent-memory);">-</div>
                </div>
                <div style="background: rgba(33, 150, 243, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid var(--accent-network);">
                    <div style="font-size: 0.8rem; color: var(--text-dim);">Active Connections</div>
                    <div id="ssh-connections" style="font-size: 1.5rem; font-weight: bold; color: var(--accent-network);">0</div>
                </div>
                <div style="background: rgba(255, 152, 0, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid var(--accent-disk);">
                    <div style="font-size: 0.8rem; color: var(--text-dim);">SSH Process Memory</div>
                    <div id="ssh-memory" style="font-size: 1.5rem; font-weight: bold; color: var(--accent-disk);">-</div>
                </div>
                <div style="background: rgba(244, 67, 54, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid #FF6B6B;">
                    <div style="font-size: 0.8rem; color: var(--text-dim);">Failed Logins</div>
                    <div id="ssh-failed-logins" style="font-size: 1.5rem; font-weight: bold; color: #FF6B6B;">0</div>
                </div>
            </div>

            <!-- SSH Active Sessions -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Active SSH Sessions</div>
                <div id="ssh-sessions" style="display: flex; flex-direction: column; gap: 8px; max-height: 300px; overflow-y: auto;">
                    <div style="color: var(--text-dim); text-align: center; padding: 20px;">No active sessions</div>
                </div>
            </div>

            <!-- SSH Authentication Methods -->
            <div class="card">
                <div class="card-title">Auth Methods</div>
                <div id="ssh-auth-methods" style="display: flex; flex-direction: column; gap: 10px;">
                    <!-- Injected via JS -->
                </div>
            </div>

            <!-- SSH Host Key Fingerprint -->
            <div class="card">
                <div class="card-title">Host Key Fingerprint (RSA)</div>
                <div style="font-size: 0.85rem; word-break: break-all; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 4px; font-family: monospace; line-height: 1.4; max-height: 150px; overflow-y: auto;">
                    <div id="ssh-hostkey" style="color: var(--text-main);">-</div>
                </div>
            </div>

            <!-- SSH Session History -->
            <div class="card">
                <div class="card-title">Known Hosts</div>
                <div style="font-size: 0.9rem; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 4px;">
                    <div id="ssh-history" style="color: var(--text-main);">-</div>
                </div>
            </div>

            <!-- OOM Risk Processes -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">High Memory Processes (OOM Risk Monitoring)</div>
                <div id="ssh-oom-processes" style="display: flex; flex-direction: column; gap: 8px;">
                    <div style="color: var(--text-dim); text-align: center; padding: 20px;">All processes within safe memory range</div>
                </div>
            </div>
        </div>
    </div>

    <div id="page-gpu" class="page">
        <div class="grid-container">
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">GPU Monitor</div>
                <div id="gpu-grid" class="gpu-grid">
                    <!-- GPU cards injected via JS -->
                </div>
            </div>
        </div>
    </div>

    <div id="page-processes" class="page">
        <div class="grid-container">
            <!-- 统计面板 -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Process Statistics</div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; text-align: center;">
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">Total Processes</div>
                        <div id="proc-total" style="font-size: 1.8rem; font-weight: bold; color: var(--accent-cpu);">0</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">Total Threads</div>
                        <div id="proc-threads" style="font-size: 1.8rem; font-weight: bold; color: var(--accent-mem);">0</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">Avg CPU %</div>
                        <div id="proc-avg-cpu" style="font-size: 1.8rem; font-weight: bold; color: var(--accent-net);">0%</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-dim);">Avg Memory %</div>
                        <div id="proc-avg-mem" style="font-size: 1.8rem; font-weight: bold; color: var(--accent-disk);">0%</div>
                    </div>
                </div>
            </div>

            <!-- 搜索和排序 -->
            <div class="card" style="grid-column: 1 / -1;">
                <div style="display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
                    <input type="text" id="proc-search" placeholder="Search process..." 
                           style="flex: 1; min-width: 200px; padding: 8px 12px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; color: var(--text-main); font-family: inherit;"
                           onkeyup="filterAndRenderProcesses()">
                    <div style="display: flex; gap: 5px; flex-wrap: wrap;">
                        <button class="sort-btn active" onclick="setProcessSort('memory')" title="Sort by Memory">
                            <i class="fas fa-sort-amount-down-alt"></i> Memory
                        </button>
                        <button class="sort-btn" onclick="setProcessSort('cpu')" title="Sort by CPU">
                            <i class="fas fa-microchip"></i> CPU
                        </button>
                        <button class="sort-btn" onclick="setProcessSort('threads')" title="Sort by Threads">
                            <i class="fas fa-sitemap"></i> Threads
                        </button>
                        <button class="sort-btn" onclick="setProcessSort('uptime')" title="Sort by Uptime">
                            <i class="fas fa-hourglass-start"></i> Uptime
                        </button>
                        <button class="sort-btn" onclick="setProcessSort('tree')" title="Process Tree">
                            <i class="fas fa-tree"></i> Tree
                        </button>
                    </div>
                </div>
            </div>

            <!-- 进程列表 -->
            <div class="card" style="grid-column: 1 / -1; max-height: 600px; overflow-y: auto;">
                <div id="process-container" style="font-size: 0.9rem;">
                    <!-- 进程列表将注入这里 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 进程详情模态框 -->
    <div id="proc-detail-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 1000; overflow-y: auto;">
        <div style="background: var(--card-bg); margin: 50px auto; max-width: 700px; border-radius: 12px; padding: 20px; max-height: 80vh; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">
                <h2 id="proc-detail-name" style="margin: 0; color: var(--accent-cpu);">Process Name</h2>
                <button onclick="closeProcDetail()" style="background: none; border: none; color: var(--text-main); cursor: pointer; font-size: 1.5rem;">×</button>
            </div>
            <div id="proc-detail-content" style="display: flex; flex-direction: column; gap: 12px;">
                <!-- 详情内容将注入这里 -->
            </div>
        </div>
    </div>

    <!-- Docker Page -->
    <div id="page-docker" class="page">
        <div class="grid-container">
            <!-- Containers -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">
                    <span>Docker Containers</span>
                    <button onclick="loadDockerContainers()" style="background: none; border: none; color: var(--text-dim); cursor: pointer;"><i class="fas fa-sync-alt"></i></button>
                </div>
                <div style="margin-bottom: 10px; display: flex; gap: 10px;">
                    <input type="text" id="docker-container-search" placeholder="Search containers..." onkeyup="renderDockerContainers()" style="padding: 5px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.1); background: rgba(0,0,0,0.2); color: white;">
                </div>
                <div class="table-scroll">
                    <table id="docker-containers-table" style="width: 100%; border-collapse: collapse; color: var(--text-main); font-size: 0.9rem;">
                        <thead>
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.1); text-align: left;">
                                <th style="padding: 10px; cursor: pointer;" onclick="setDockerContainerSort('name')">Name <i class="fas fa-sort"></i></th>
                                <th style="padding: 10px;">Image</th>
                                <th style="padding: 10px; cursor: pointer;" onclick="setDockerContainerSort('state')">State <i class="fas fa-sort"></i></th>
                                <th style="padding: 10px;">Status</th>
                                <th style="padding: 10px;">Ports</th>
                                <th style="padding: 10px;">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="docker-containers-body"></tbody>
                    </table>
                </div>
            </div>

            <!-- Images -->
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">
                    <span>Docker Images</span>
                    <button onclick="loadDockerImages()" style="background: none; border: none; color: var(--text-dim); cursor: pointer;"><i class="fas fa-sync-alt"></i></button>
                </div>
                <div style="margin-bottom: 10px; display: flex; gap: 10px;">
                    <input type="text" id="docker-image-search" placeholder="Search images..." onkeyup="renderDockerImages()" style="padding: 5px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.1); background: rgba(0,0,0,0.2); color: white;">
                </div>
                <div class="table-scroll">
                    <table id="docker-images-table" style="width: 100%; border-collapse: collapse; color: var(--text-main); font-size: 0.9rem;">
                        <thead>
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.1); text-align: left;">
                                <th style="padding: 10px; cursor: pointer;" onclick="setDockerImageSort('id')">ID <i class="fas fa-sort"></i></th>
                                <th style="padding: 10px;">Tags</th>
                                <th style="padding: 10px; cursor: pointer;" onclick="setDockerImageSort('size')">Size <i class="fas fa-sort"></i></th>
                                <th style="padding: 10px; cursor: pointer;" onclick="setDockerImageSort('created')">Created <i class="fas fa-sort"></i></th>
                                <th style="padding: 10px;">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="docker-images-body"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Services Page -->
    <div id="page-services" class="page">
        <div class="grid-container">
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">
                    <span>System Services</span>
                    <button onclick="loadServices()" style="background: none; border: none; color: var(--text-dim); cursor: pointer;"><i class="fas fa-sync-alt"></i></button>
                </div>
                <div style="margin-bottom: 10px; display: flex; gap: 10px;">
                    <input type="text" id="service-search" placeholder="Search services..." onkeyup="renderServices()" style="padding: 5px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.1); background: rgba(0,0,0,0.2); color: white;">
                </div>
                <div class="table-scroll">
                    <table id="services-table" style="width: 100%; border-collapse: collapse; color: var(--text-main); font-size: 0.9rem;">
                        <thead>
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.1); text-align: left;">
                                <th style="padding: 10px; cursor: pointer;" onclick="setServiceSort('unit')">Unit <i class="fas fa-sort"></i></th>
                                <th style="padding: 10px;">Load</th>
                                <th style="padding: 10px; cursor: pointer;" onclick="setServiceSort('active')">Active <i class="fas fa-sort"></i></th>
                                <th style="padding: 10px;">Sub</th>
                                <th style="padding: 10px;">Description</th>
                                <th style="padding: 10px;">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="services-body"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Cron Jobs Page -->
    <div id="page-cron" class="page">
        <div class="grid-container">
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">
                    <span>Cron Jobs (Root)</span>
                    <div>
                        <button id="btn-add-cron" onclick="addCronJob()" style="background: var(--accent-mem); border: none; color: white; padding: 5px 10px; border-radius: 4px; cursor: pointer; margin-right: 10px; display: none;"><i class="fas fa-plus"></i> Add Job</button>
                        <button id="btn-save-cron" onclick="saveCronJobs()" style="background: var(--accent-net); border: none; color: white; padding: 5px 10px; border-radius: 4px; cursor: pointer; display: none;"><i class="fas fa-save"></i> Save Changes</button>
                        <button onclick="loadCronJobs()" style="background: none; border: none; color: var(--text-dim); cursor: pointer; margin-left: 10px;"><i class="fas fa-sync-alt"></i></button>
                    </div>
                </div>
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; color: var(--text-main); font-size: 0.9rem;">
                        <thead>
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.1); text-align: left;">
                                <th style="padding: 10px; width: 20%;">Schedule</th>
                                <th style="padding: 10px; width: 70%;">Command</th>
                                <th style="padding: 10px; width: 10%;">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="cron-body"></tbody>
                    </table>
                </div>
                <div style="margin-top: 10px; color: var(--text-dim); font-size: 0.8rem;">
                    <i class="fas fa-info-circle"></i> Schedule format: Minute Hour Day Month Weekday (e.g., "*/5 * * * *" for every 5 mins)
                </div>
            </div>
        </div>
    </div>

    <!-- User Management Page -->
    <div id="page-users" class="page">
        <div class="grid-container">
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">
                    <span>User Management</span>
                    <button onclick="showAddUserModal()" style="background: var(--accent-mem); border: none; color: white; padding: 5px 10px; border-radius: 4px; cursor: pointer;">
                        <i class="fas fa-plus"></i> Add User
                    </button>
                </div>
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; color: var(--text-main);">
                        <thead>
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.1); text-align: left;">
                                <th style="padding: 10px;">Username</th>
                                <th style="padding: 10px;">Role</th>
                                <th style="padding: 10px;">Created At</th>
                                <th style="padding: 10px;">Last Login</th>
                                <th style="padding: 10px;">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="users-table-body">
                            <!-- Users injected here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Operation Logs Page -->
    <div id="page-logs" class="page">
        <div class="grid-container">
            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-title">Operation Logs</div>
                <div class="logs-scroll">
                    <table style="width: 100%; border-collapse: collapse; color: var(--text-main);">
                        <thead>
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.1); text-align: left;">
                                <th style="padding: 10px;">Time</th>
                                <th style="padding: 10px;">User</th>
                                <th style="padding: 10px;">Action</th>
                                <th style="padding: 10px;">Details</th>
                                <th style="padding: 10px;">IP</th>
                            </tr>
                        </thead>
                        <tbody id="logs-table-body">
                            <!-- Logs injected here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Page -->
    <div id="page-profile" class="page">
        <div class="grid-container" style="display: flex; justify-content: center;">
            <div class="card" style="width: 100%; max-width: 600px;">
                <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <div style="width: 80px; height: 80px; background: rgba(255,255,255,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; color: var(--accent-cpu);">
                        <i class="fas fa-user"></i>
                    </div>
                    <div>
                        <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 5px;" id="profile-username">-</div>
                        <div style="color: var(--text-dim); background: rgba(255,255,255,0.05); padding: 4px 10px; border-radius: 15px; display: inline-block; font-size: 0.85rem;">
                            <i class="fas fa-shield-alt" style="margin-right: 5px;"></i> <span id="profile-role">-</span>
                        </div>
                    </div>
                </div>

                <div class="card-title"><i class="fas fa-key" style="margin-right: 10px;"></i> Change Password</div>
                <form id="change-password-form" onsubmit="handleChangePassword(event)">
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; color: var(--text-dim); font-size: 0.9rem;">Current Password</label>
                        <div style="position: relative;">
                            <i class="fas fa-lock" style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--text-dim);"></i>
                            <input type="password" id="cp-old" required style="width: 100%; padding: 12px 12px 12px 35px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px; font-family: inherit; box-sizing: border-box; transition: border-color 0.2s;">
                        </div>
                    </div>
                    <div style="margin-bottom: 25px;">
                        <label style="display: block; margin-bottom: 8px; color: var(--text-dim); font-size: 0.9rem;">New Password</label>
                        <div style="position: relative;">
                            <i class="fas fa-lock" style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--text-dim);"></i>
                            <input type="password" id="cp-new" required style="width: 100%; padding: 12px 12px 12px 35px; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 6px; font-family: inherit; box-sizing: border-box; transition: border-color 0.2s;">
                        </div>
                    </div>
                    <button type="submit" style="width: 100%; padding: 12px; background: linear-gradient(45deg, var(--accent-cpu), #ff6b81); border: none; color: white; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 1rem; transition: opacity 0.2s;">
                        Update Password
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Add User Modal -->
    <div id="add-user-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; align-items: center; justify-content: center;">
        <div class="card" style="width: 400px; background: #2d2d2d;">
            <div class="card-title">
                <span>Add New User</span>
                <i class="fas fa-times" onclick="document.getElementById('add-user-modal').style.display='none'" style="cursor: pointer;"></i>
            </div>
            <form onsubmit="handleAddUser(event)">
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; color: var(--text-dim);">Username</label>
                    <input type="text" id="new-username" required style="width: 100%; padding: 8px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 4px;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; color: var(--text-dim);">Password</label>
                    <input type="password" id="new-password" required style="width: 100%; padding: 8px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 4px;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; color: var(--text-dim);">Role</label>
                    <select id="new-role" style="width: 100%; padding: 8px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 4px;">
                        <option value="user">User</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <button type="submit" style="width: 100%; padding: 10px; background: var(--accent-mem); border: none; color: white; border-radius: 4px; cursor: pointer;">Create User</button>
            </form>
        </div>
    </div>

    </div> <!-- End main-content -->
</div> <!-- End app-container -->

    <script src="{{ asset "/static/js/auth.js" }}"></script>
    <script src="{{ asset "/static/js/state.js" }}"></script>
    <script src="{{ asset "/static/js/util.js" }}"></script>
    <script src="{{ asset "/static/js/api.js" }}"></script>
    <script src="{{ asset "/static/js/charts/sparkline.js" }}"></script>
    <script src="{{ asset "/static/js/charts/memoryPie.js" }}"></script>
    <script src="{{ asset "/static/js/render/gpu.js" }}"></script>
    <script src="{{ asset "/static/js/render/processes.js" }}"></script>
    <script src="{{ asset "/static/js/render/stats.js" }}"></script>
    <script src="{{ asset "/static/js/ws.js" }}"></script>
    <script src="{{ asset "/static/js/ui/navigation.js" }}"></script>
    <script src="{{ asset "/static/js/app.js" }}"></script>
</body>
</html>
